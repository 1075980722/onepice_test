"use strict";(self["webpackChunkonepic"]=self["webpackChunkonepic"]||[]).push([[5212],{45212:function(t,e,a){a.r(e),a.d(e,{default:function(){return m}});var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"popupchart"},[e("div",{staticClass:"top"},[e("span",[t._v("时间")]),e("el-select",{attrs:{placeholder:"请选择"},on:{change:t.handleChangeData},model:{value:t.time,callback:function(e){t.time=e},expression:"time"}},t._l(t.options,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),e("div",{staticClass:"center"},[e("div",{ref:"yuliang",staticStyle:{width:"100%",height:"100%"}})]),e("div",{staticClass:"footer"},[e("div",{staticClass:"shuiwei"},[e("div",[t._v(" 累计雨量: "),e("span",[t._v(t._s(t.chartDatatemp.totalNum))]),t._v(" mm ")])]),e("p",[t._v("备注:"+t._s(t.remark))])])])},o=[],l=(a(57658),a(30541),a(11117)),r=a(49950),s={props:{chartData:{type:Object},query:{type:Object}},watch:{chartData:{handler(t){this.$nextTick((()=>{this.chartDatatemp=t,""!=this.mychart&&(this.mychart.clear(this.option),this.initChart())}))},deep:!0,immediate:!0}},data(){return{remark:"",mychart:"",option:{},options:[{value:"6",label:"6小时"},{value:"12",label:"12小时"},{value:"24",label:"一天"},{value:"48",label:"二天"},{value:"72",label:"三天"}],time:"24",chartDatatemp:[],code:this.query.code,source:this.query.source,timeData:[]}},created(){},mounted(){this.initChart(),this.handleTimeData(24)},methods:{initChart(){this.mychart=l.S1(this.$refs.yuliang);let t={tooltip:{trigger:"axis",axisPointer:{type:"line"},backgroundColor:"rgba(9, 24, 48, 0.5)",borderColor:"rgba(75, 253, 238, 0.4)",textStyle:{color:"#CFE3FC"}},legend:[{data:["雨量"],top:"0",x:"30%",itemWidth:8,borderColor:"rgba(255, 192, 0, 1)",textStyle:{color:"rgba(0,0,0,.4)",fontSize:12}},{data:["累计雨量"],top:"0",x:"50%",itemStyle:{borderWidth:2},textStyle:{color:"rgba(0,0,0,.4)",fontSize:12},itemWidth:15,itemHeight:8}],grid:{left:"15px",right:"15px",top:"30px",bottom:"10px",containLabel:!0},xAxis:[{show:!0,type:"category",boundaryGap:!0,axisTick:{show:!1,lineStyle:{color:"black",fontSize:"12px"}},data:this.chartDatatemp.xData,axisLine:{lineStyle:{color:"rgba(0, 0, 0, 0.2)"}},axisLabel:{show:!1,interval:0,color:"rgba(0, 0, 0, 1)",fontSize:12}},{show:!0,type:"category",position:"bottom",boundaryGap:!0,axisPointer:{type:"none"},axisTick:{lineStyle:{color:"black",fontSize:"12px"}},data:this.timeData,axisLine:{lineStyle:{color:"rgba(0, 0, 0, 0.2)"}},axisLabel:{show:!0,color:"rgba(0, 0, 0, 1)",fontSize:12},splitLine:{show:!0,interval:0,lineStyle:{color:"rgba(58, 58, 58, 0.2)",type:"solid"}}}],yAxis:[{name:"雨量(mm)",nameGap:28,nameLocation:"middle",nameTextStyle:{fontSize:12,color:"#000"},type:"value",axisTick:{show:!0,length:5,lineStyle:{color:"black",fontSize:"12px"}},axisLine:{show:!0,lineStyle:{color:"rgba(0, 0, 0, 0.2)"},symbolSize:[5,12],symbolOffset:[0,10]},max:this.chartDatatemp.totalNum+5,axisLabel:{interval:.5,color:"rgba(54,58,68,0.70)",fontSize:14},splitLine:{show:!0,lineStyle:{color:"rgba(0, 0, 0, 0.2)",width:1,type:"solid"}}},{name:"累计雨量(mm)",nameGap:28,nameLocation:"middle",nameTextStyle:{fontSize:12,color:"#000"},type:"value",axisTick:{show:!0,length:5,lineStyle:{color:"black",fontSize:"12px"}},axisLine:{show:!0,lineStyle:{color:"rgba(0, 0, 0,0.2)"},symbolSize:[5,12],symbolOffset:[0,10]},min:0,max:this.chartDatatemp.totalNum+5,axisLabel:{interval:1,color:"rgba(54,58,68,0.70)",fontSize:14,formatter:"{value}"},splitLine:{show:!1,lineStyle:{color:"rgba(39, 57, 75, 1)",width:1,type:"solid"}}}],series:[{name:"累计雨量",yAxisIndex:1,type:"line",smooth:!0,showSymbol:!1,areaStyle:{color:new l.Q.o(0,0,0,1,[{offset:0,color:"rgba(32,128,247,.4)"},{offset:1,color:"rgba(32,128,247,0)"}])},data:this.chartDatatemp.yData2,symbol:"circle",symbolSize:8,itemStyle:{normal:{color:"#2080F7",borderColor:"#2080F7",lineStyle:{color:"#2080F7"}}}},{type:"bar",barWidth:8,barGap:"10%",barCategoryGap:"10%",yAxisIndex:0,name:"雨量",itemStyle:{normal:{color:"#2080F7"}},data:this.chartDatatemp.yData1}]};this.mychart.setOption(t),this.$nextTick((()=>{window.addEventListener("resize",(function(){this.mychart.resize()}))}))},handleChangeData(t){this.handleData(t),this.timeData=[],this.handleTimeData(t)},async handleData(t){const e=this.formatDateTime(new Date(new Date((new Date).getTime()-60*t*60*1e3))),a=this.formatDateTime(new Date((new Date).getTime()));let i={startTime:e,endTime:a,code:this.code,source:this.source},o=await(0,r.sq)(i),l=o.result[0];this.$store.state.point.tableData=[],this.chartData={xData:[],yData1:[],yData2:[]};let s=l.yuLiangAccumulateVos.filter((t=>"00"===t.tm.slice(-5,-3)));s.forEach(((t,e)=>{let a={};a.id=e+1,a.collectTime=null==t.tm?"":t.tm.slice(5,-3),a.shiDuanYuLiang=null==t.hsum?"":t.hsum,this.chartData.totalNum=null==t.cum?"":t.cum,this.chartData.xData.push(t.tm),this.chartData.yData1.push(t.hsum),this.chartData.yData2.push(t.cum),this.$store.dispatch("updateTableData",a)}))},handleTimeData(t){if(t)for(let e=0;e<6;e++){let a=this.formatDateTime(new Date(new Date((new Date).getTime()-e*(t/6)*60*60*1e3)),1);this.timeData.unshift(a)}}}},n=s,h=a(1001),c=(0,h.Z)(n,i,o,!1,null,"43eddbb6",null),m=c.exports}}]);