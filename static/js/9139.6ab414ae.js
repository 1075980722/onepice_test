"use strict";(self["webpackChunkonepic"]=self["webpackChunkonepic"]||[]).push([[9139],{48774:function(e,t,a){a.r(t),a.d(t,{default:function(){return c}});var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"evaorariointable"},[t("div",{staticClass:"conditionfilter"},[t("div",{staticClass:"datafrom"},[t("span",[e._v("数据来源:")]),t("el-checkbox-group",{model:{value:e.datafrom,callback:function(t){e.datafrom=t},expression:"datafrom"}},[t("el-checkbox",{attrs:{label:"4",value:"4"}},[e._v("环保")]),t("el-checkbox",{attrs:{label:"1",value:"1"}},[e._v("自建")])],1)],1),t("div",{staticClass:"floodLevel"},[t("span",[e._v("重要程度:")]),t("el-radio",{attrs:{label:"0"},model:{value:e.floodLevel,callback:function(t){e.floodLevel=t},expression:"floodLevel"}},[e._v("全部")]),t("el-radio",{attrs:{label:"1"},model:{value:e.floodLevel,callback:function(t){e.floodLevel=t},expression:"floodLevel"}},[e._v("重点")])],1),t("div",{staticClass:"search"},[t("el-input",{staticStyle:{"margin-right":"0.125rem",width:"2.5rem"},attrs:{size:"small",placeholder:"站名、站码"},model:{value:e.filter.stationInput,callback:function(t){e.$set(e.filter,"stationInput",t)},expression:"filter.stationInput"}}),t("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-search"},on:{click:e.handleSearch}},[e._v(" 查询 ")])],1)]),t("div",{staticClass:"content"},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tablelist.datalist0,"header-cell-style":{padding:0,height:".5rem",background:"#eeeeee",color:"#000"},border:"",stripe:"",height:"100%"},on:{"row-click":function(t){return e.JumpToDetail(t)}}},[e._l(e.columns,(function(e,a){return[t("el-table-column",{key:a,attrs:{fixed:e.fixed,prop:e.data,label:e.title,width:e.width,align:"center"}})]}))],2)],1)])},l=[],o=(a(57658),a(12218)),n=a(51206),s=a(65380);async function r(e){null!=this.$store.state.map.waterqualityLayer&&this.$store.dispatch("RemoveFeatureFromLayer",this.$store.state.map.waterqualityLayer);const t={symbol:{type:"text",color:"black",backgroundColor:"#fff",borderLineColor:"#ccc",borderLineSize:1,font:{size:9,weight:"normal"}},labelPlacement:"center-right",labelExpressionInfo:{expression:"$feature.name + '  ' + $feature.shuizhi"},maxScale:0,minScale:5e5};this.$store.state.map.waterqualityLayer=new s["default"]({id:"waterqualityLayer",title:"水质图层",visible:!0,fields:[{type:"string",name:"shuizhi"},{type:"string",name:"name"},{type:"string",name:"htCode"},{type:"string",name:"longitude"},{type:"string",name:"latitude"},{type:"string",name:"code"},{type:"string",name:"source"},{type:"string",name:"dox"},{type:"string",name:"codmn"},{type:"string",name:"dox"},{type:"string",name:"wtmp"},{type:"string",name:"ph"},{type:"string",name:"cond"},{type:"string",name:"nh3n"},{type:"string",name:"turb"},{type:"string",name:"tp"}],outFields:["*"],objectIdField:"ObjectID",geometryType:"point",labelsVisible:!1,labelingInfo:[t],source:[],renderer:{type:"simple",symbol:{type:"picture-marker",width:"28",height:"35",url:"./static/icon/shuizhi1.png"},visualVariables:[{type:"size",valueExpression:"$view.scale",stops:[{value:5e5,size:30},{value:25e4,size:28},{value:125e3,size:25},{value:32e3,size:20}]}]}}),this.$store.state.map.map.add(this.$store.state.map.waterqualityLayer);let a=await this.$store.dispatch("AddFeaturesToLayer",e),i={layer:this.$store.state.map.waterqualityLayer,points:a};this.$store.commit("applyEditsToLayer",i)}var d={data(){return{loading:!1,datafrom:["1","4"],floodLevel:"1",datepicker:!1,startTime:"",endTime:"",timeOptions:[{value:"1",label:"近1小时"},{value:"6",label:"前6小时"},{value:"12",label:"前12小时"},{value:"24",label:"前1天"},{value:"48",label:"前2天"},{value:"72",label:"前3天"},{value:"custom",label:"自定义"}],filter:{time:"1",num:0,compare:"2",date1:new Date,date2:new Date,stationInput:""},count:{num0:0},groupdata:{numRange0:!1},tablelist:{datalist0:[]},deviceData:[],columns:[{fixed:"fixed",title:"序号",width:60,data:"id"},{title:"站名",width:180,data:"name"},{title:"时间",width:120,data:"collectTime"},{title:"水温(℃)",width:80,data:"wtmp"},{title:"pH",width:80,data:"ph"},{title:"溶解氧(mg/L)",width:80,data:"dox"},{title:"高猛酸盐指数(mg/L)",width:120,data:"codmn"},{title:"氨氮(mg/L)",width:80,data:"nh3n"},{title:"化学需氧量(mg/L)",width:110,data:"codcr"},{title:"总磷(mg/L)",width:80,data:"tp"},{title:"浊度(mg/L)",width:80,data:"turb"}]}},created(){},mounted(){this.handleSearch()},methods:{JumpToDetail(e){this.$store.state.map.view.goTo({center:new o.Z({x:e.longitude,y:e.latitude}),scale:3e4}).then((()=>{console.log("平移")}))},handleChooseTime(e){this.datepicker="custom"===e},async handleSearch(){this.loading=!0;let e={sources:this.datafrom.toString(),stationName:this.filter.stationInput,mainSelect:this.floodLevel},t=await(0,n.E)(e);200===t.code&&(this.loading=!1);let a=t.result;null!=a?(this.groupdata.numRange0=!0,this.tablelist.datalist0=[],this.deviceData=[],this.count.num0=a.length,a.forEach(((e,t)=>{this.deviceData.push(e.shuiZhiRealTimeInfoVo);let a={};a.id=t+1,a.latitude=e.shuiZhiRealTimeInfoVo.latitude,a.longitude=e.shuiZhiRealTimeInfoVo.longitude,a.name=null==e.shuiZhiRealTimeInfoVo.name?"-":e.shuiZhiRealTimeInfoVo.name;let i=null==e.shuiZhiRealTimeInfoVo.collectTime?"-":e.shuiZhiRealTimeInfoVo.collectTime.slice(5,-3);a.collectTime=i,a.wtmp=null==e.shuiZhiRealTimeInfoVo.wtmp?"-":e.shuiZhiRealTimeInfoVo.wtmp,a.ph=null==e.shuiZhiRealTimeInfoVo.ph?"-":e.shuiZhiRealTimeInfoVo.ph,a.dox=null==e.shuiZhiRealTimeInfoVo.dox?"-":e.shuiZhiRealTimeInfoVo.dox,a.codmn=null==e.shuiZhiRealTimeInfoVo.codmn?"-":e.shuiZhiRealTimeInfoVo.codmn,a.nh3n=null==e.shuiZhiRealTimeInfoVo.nh3n?"-":e.shuiZhiRealTimeInfoVo.nh3n,a.codcr=null==e.shuiZhiRealTimeInfoVo.codcr?"-":e.shuiZhiRealTimeInfoVo.codcr,a.tp=null==e.shuiZhiRealTimeInfoVo.tp?"-":e.shuiZhiRealTimeInfoVo.tp,a.turb=null==e.shuiZhiRealTimeInfoVo.turb?"-":e.shuiZhiRealTimeInfoVo.turb,this.tablelist.datalist0.push(a)}))):(this.tablelist.datalist0=[],this.groupdata.numRange0=!1);let i=this.flatten5(this.deviceData);await this.initWaterQualityData(i)},initWaterQualityData:r,handleNumChange(e){console.log(e)}}},h=d,u=a(1001),m=(0,u.Z)(h,i,l,!1,null,"8afe3b76",null),c=m.exports}}]);