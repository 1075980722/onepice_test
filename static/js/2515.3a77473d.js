"use strict";(self["webpackChunkonepic"]=self["webpackChunkonepic"]||[]).push([[2515],{2515:function(e,t,a){a.r(t),a.d(t,{default:function(){return m}});var l=function(){var e=this,t=e._self._c;return t("div",{staticClass:"zhengfa"},[t("div",{staticClass:"title"},[e._v("蒸发监测")]),t("div",{staticClass:"conditionfilter",style:e.datepicker?"height:22%":"height:16%"},[t("div",{staticClass:"datafrom"},[t("span",[e._v("数据来源:")]),t("el-checkbox-group",{model:{value:e.datafrom,callback:function(t){e.datafrom=t},expression:"datafrom"}},[t("el-checkbox",{attrs:{label:"2",value:"2"}},[e._v("水文")]),t("el-checkbox",{attrs:{label:"1",value:"1"}},[e._v("自建")])],1)],1),t("div",{staticClass:"filter"},[t("el-select",{attrs:{size:"small","popper-append-to-body":!1,"no-data-text":"数据为空显示此处信息",filterable:"",placeholder:"请选择时间"},on:{change:e.handleChooseTime},model:{value:e.filter.time,callback:function(t){e.$set(e.filter,"time",t)},expression:"filter.time"}},e._l(e.timeOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),t("el-select",{staticStyle:{margin:"0 10px"},attrs:{size:"small","popper-append-to-body":!1,"no-data-text":"数据为空显示此处信息",filterable:"",placeholder:"请选择"},model:{value:e.filter.compare,callback:function(t){e.$set(e.filter,"compare",t)},expression:"filter.compare"}},[t("el-option",{attrs:{label:">",value:"1"}}),t("el-option",{attrs:{label:">=",value:"2"}})],1),t("el-input-number",{attrs:{size:"small",step:.5,"controls-position":"right",min:0},on:{change:e.handleNumChange},model:{value:e.filter.num,callback:function(t){e.$set(e.filter,"num",t)},expression:"filter.num"}})],1),t("div",{directives:[{name:"show",rawName:"v-show",value:e.datepicker,expression:"datepicker"}],staticClass:"datepicker"},[e._v(" 起: "),t("el-date-picker",{attrs:{size:"small",type:"datetime",placeholder:"选择日期时间"},model:{value:e.filter.date1,callback:function(t){e.$set(e.filter,"date1",t)},expression:"filter.date1"}}),e._v(" 止: "),t("el-date-picker",{attrs:{size:"small",type:"datetime",placeholder:"选择日期时间"},model:{value:e.filter.date2,callback:function(t){e.$set(e.filter,"date2",t)},expression:"filter.date2"}})],1),t("div",{staticClass:"floodLevel"},[t("span",[e._v("重要程度:")]),t("el-radio",{attrs:{label:"0"},model:{value:e.floodLevel,callback:function(t){e.floodLevel=t},expression:"floodLevel"}},[e._v("全部")]),t("el-radio",{attrs:{label:"1"},model:{value:e.floodLevel,callback:function(t){e.floodLevel=t},expression:"floodLevel"}},[e._v("重点")])],1),t("div",{staticClass:"search"},[t("el-input",{attrs:{size:"small",placeholder:"站名、站码"},model:{value:e.filter.stationInput,callback:function(t){e.$set(e.filter,"stationInput",t)},expression:"filter.stationInput"}}),t("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-search"},on:{click:e.handleSearch}},[e._v(" 查询 ")])],1)]),t("div",{staticClass:"content",style:e.datepicker?"height:129vw":"height:140vw"},[e._m(0),t("div",{staticClass:"tree_content"},[t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"tb_content",staticStyle:{height:"100%","overflow-y":"auto"}},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.groupdata.numRange0,expression:"groupdata.numRange0"}],staticClass:"tb_group"},[e._l(e.tablelist.datalist0,(function(a,l){return[t("div",{key:l,class:l%2===0?"line":"line odd"},e._l(a.data,(function(a){return t("div",{key:a,staticClass:"text-c"},[e._v(" "+e._s(a)+" ")])})),0)]}))],2)])])])])},i=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"table_header"},[t("div",{staticClass:"th-title"},[t("div",{staticClass:"text-c"},[e._v("序号")]),t("div",{staticClass:"text-c"},[e._v("站名")]),t("div",{staticClass:"text-c"},[e._v("累计蒸发量")])])])}],s=(a(57658),a(16391));const n=e=>(0,s.Z)({url:"/mainBizZhengFa/open/getRealTimeDataAllZhengFa",method:"GET",params:e});var o={data(){return{loading:!1,datafrom:["1","2"],floodLevel:"1",datepicker:!1,startTime:"",endTime:"",timeOptions:[{value:"1",label:"近1小时"},{value:"6",label:"前6小时"},{value:"12",label:"前12小时"},{value:"24",label:"前1天"},{value:"48",label:"前2天"},{value:"72",label:"前3天"},{value:"custom",label:"自定义"}],filter:{time:"72",num:0,compare:"2",date1:new Date,date2:new Date,stationInput:""},iconStatus:{icon_open0:!1},count:{num0:0},groupdata:{numRange0:!1},tablelist:{datalist0:[]},deviceData:[]}},created(){},mounted(){this.handleSearch()},methods:{handleChooseTime(e){this.datepicker="custom"===e},async handleSearch(){this.loading=!0,"custom"===this.filter.time?(this.startTime=this.formatDateTime(this.filter.date1),this.endTime=this.formatDateTime(this.filter.date2)):(this.startTime=this.formatDateTime(new Date(new Date((new Date).getTime()-60*this.filter.time*60*1e3))),this.endTime=this.formatDateTime(new Date((new Date).getTime())));let e={startTime:this.startTime,endTime:this.endTime,sources:this.datafrom.toString(),judgmentValue:this.filter.num.toString(),judgmentType:this.filter.compare,stationName:this.filter.stationInput,mainSelect:this.floodLevel},t=await n(e);200===t.code&&(this.loading=!1);let a=t.result;if(this.deviceData=[],0!=a)if(null!=a[0].zhengFaRealTimeInfoVo){this.groupdata.numRange0=!0,this.tablelist.datalist0=[];let e=[{stcd:a[0].zhengFaRealTimeInfoVo.stcd,name:a[0].zhengFaRealTimeInfoVo.stnm,longitude:a[0].zhengFaRealTimeInfoVo.lgtd,latitude:a[0].zhengFaRealTimeInfoVo.lttd,wsfe:a[0].zhengFaRealTimeInfoVo.wsfe,source:a[0].zhengFaRealTimeInfoVo.source}];this.deviceData.push(e),a.forEach(((e,t)=>{let a={data:{}};a.data.id=t+1,a.data.name=null==e.zhengFaRealTimeInfoVo.stnm?"-":e.zhengFaRealTimeInfoVo.stnm,a.data.zhengfl=null==e.zhengFaRealTimeInfoVo.wsfe?"-":e.zhengFaRealTimeInfoVo.wsfe,this.tablelist.datalist0.push(a)}))}else this.tablelist.datalist0=[],this.groupdata.numRange0=!1;else this.deviceData=[],this.tablelist.datalist0=[]},handleNumChange(e){console.log(e)}}},r=o,d=a(1001),c=(0,d.Z)(r,l,i,!1,null,"2930dea6",null),m=c.exports}}]);