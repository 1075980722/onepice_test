"use strict";(self["webpackChunkonepic"]=self["webpackChunkonepic"]||[]).push([[5208,2526,3545],{25208:function(e,t,i){i.r(t),i.d(t,{default:function(){return d}});var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"video"},[t("div",{staticClass:"main"},[t("div",{staticClass:"aside"},[t("div",{staticClass:"head-container"},[t("el-input",{staticStyle:{"margin-bottom":"20px"},attrs:{placeholder:"请输入名称",clearable:"",size:"small","prefix-icon":"el-icon-search"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}})],1),t("div",{staticClass:"asideTree"},[t("el-tree",{ref:"tree",attrs:{data:e.videoOptions,props:e.defaultProps,"expand-on-click-node":!1,"filter-node-method":e.filterNode,"highlight-current":""},on:{"node-click":e.handleNodeClick}})],1)]),t("div",{staticClass:"container"},[t("div",{staticClass:"wrap_div"},[t("div",{staticClass:"row_div"},e._l(e.layoutConfig,(function(i,a){return t("div",{key:a,staticClass:"layout_div",on:{click:function(t){return e.changeLay(i.status,i.PageSize)}}},[t("div",{class:{active_i:e.curlayout===i.status}},[t("i",{class:i.icon})])])})),0),t("div",{staticClass:"radio_div"},[t("div",{staticClass:"all"},[t("div",{staticClass:"video_div",class:e.layoutConfig[this.curlayout].video_div_class},[t("div",{staticClass:"video-wrap video_data"},e._l(e.testRealTimeData,(function(i,a){return t("div",{key:a,staticClass:"video_con",class:{nine_:3===e.curlayout,four_:2===e.curlayout,first_:1===e.curlayout},on:{click:function(t){return e.showSelect(a)}}},[i.hlsurl?t("base-video",{attrs:{vData:i}}):e._e(),i.hlsurl?t("div",{directives:[{name:"show",rawName:"v-show",value:!0,expression:"true"}],staticClass:"clearChannel",on:{click:function(t){return e.clearVideo(a)}}},[e._v(" 关闭 ")]):e._e()],1)})),0)])])])])])])])},s=[],l=(i(57658),i(86189)),o={data(){return{filterText:"",videoOptions:[],defaultProps:{children:"children",label:"label"},curlayout:2,currentPage:1,PageSize:1,items:[],testRealTimeData:[],layoutConfig:{1:{name:"1x1",status:1,icon:"iconfont icon-icon1x1",PageSize:1,video_div_class:"first_div"},2:{name:"2x2",status:2,icon:"iconfont icon-icon2x2",PageSize:4,video_div_class:"four_div"},3:{name:"3x3",status:3,icon:"iconfont icon-icon3x3",PageSize:9,video_div_class:"nine_div"}}}},created(){this.handleVideotree(),this.changeLay(2,4)},mounted(){this.handlevideoChoose()},methods:{async handleVideotree(){let e=await(0,l.I)(),t=e.result[0].videoTreeVos;this.videoOptions=[];let i={};i.id=t[0].id,i.label=t[0].name,i.children=[],t[0].children.forEach(((e,t)=>{let a={};a.id=t,a.label=e.name,a.children=[],e.videoInfoVos&&e.videoInfoVos.forEach(((e,t)=>{let i={};i.id=t,i.label=e.cameraName,i.cameraIndexCode=e.cameraIndexCode,a.children.push(i)})),e.children.forEach(((e,t)=>{let i={};i.id=t;let s=e.name.replace(/[0-9]/g,""),l=s.replace("()","");i.label=l,i.children=[],e.videoInfoVos.forEach(((e,t)=>{let a={};a.id=t,a.label=e.cameraName,a.cameraIndexCode=e.cameraIndexCode,i.children.push(a)})),a.children.push(i)})),i.children.push(a)})),this.videoOptions.push(i)},filterNode(e,t){return!e||-1!==t.label.indexOf(e)},clearVideo(e){this.testRealTimeData[e].hlsurl=""},setVideoToIframe(e){for(let t=0;t<this.items.length;t++)if(this.items[t])return void(this.testRealTimeData[t].hlsurl=e)},async handleNodeClick(e){this.loading=!0;let t=await(0,l._M)({cameraIndexCode:e.cameraIndexCode}),i=t.result[0].videoUrlVo.cameraIndexCode;this.setVideoToIframe(i)},showSelect(e){for(let t=0;t<this.testRealTimeData.length;t++)this.items[t]=e==t},handlevideoChoose(){1===this.curlayout?this.$nextTick((()=>{let e=document.querySelector(".first_");e.onclick=()=>{e.classList.add("active")}})):2===this.curlayout?this.$nextTick((()=>{let e=document.querySelectorAll(".four_");for(let t=0;t<e.length;t++){let i=e[t];i.onclick=function(){for(let t=0;t<e.length;t++)e[t].classList.remove("active");e[t].classList.add("active")}}})):3===this.curlayout&&this.$nextTick((()=>{let e=document.querySelectorAll(".nine_");for(let t=0;t<e.length;t++)e[t].onclick=function(){for(let t=0;t<e.length;t++)e[t].classList.remove("active");this.classList.add("active")}}))},changeLay(e,t){this.curlayout=e,this.items=[],this.testRealTimeData=[];for(let i=0;i<t;i++){this.items[i]=!1;let e="rid"+Math.floor(3e3*Math.random());this.testRealTimeData.push({cameraId:e,hlsurl:""})}this.handlevideoChoose()}},watch:{curlayout(){this.PageSize=this.layoutConfig[this.curlayout].PageSize,this.currentPage=1},filterText(e){this.$refs.tree.filter(e)}},computed:{}},n=o,c=i(1001),r=(0,c.Z)(n,a,s,!1,null,"504de61e",null),d=r.exports},86189:function(e,t,i){i.d(t,{I:function(){return o},Qm:function(){return s},YU:function(){return l},_M:function(){return n}});var a=i(16391);const s=e=>(0,a.Z)({url:"/identification/open/getLocation",method:"GET",params:e}),l=e=>(0,a.Z)({url:"/outlet/open/getLocation",method:"GET",params:e}),o=e=>(0,a.Z)({url:"/hk/open/getVideoTree",method:"GET",params:e}),n=e=>(0,a.Z)({url:"/hk/open/getHkVideo",method:"GET",params:e})}}]);