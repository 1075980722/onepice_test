"use strict";(self["webpackChunkonepic"]=self["webpackChunkonepic"]||[]).push([[8954],{8954:function(e,t,a){a.r(t),a.d(t,{default:function(){return c}});var l=function(){var e=this,t=e._self._c;return t("div",{staticClass:"contain"},[t("div",{staticClass:"left"},[t("el-input",{attrs:{placeholder:"输入关键字进行过滤"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),t("el-tree",{ref:"tree",staticClass:"filter-tree",attrs:{data:e.TreeData,props:e.defaultProps,"check-on-click-node":!0,"filter-node-method":e.filterNode,"node-key":"id","default-expanded-keys":["-1"],"highlight-current":""},on:{"node-click":e.handleNodeClick}})],1),t("div",{staticClass:"right"},[t("div",{staticClass:"search"},[t("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.form}},[t("el-form-item",{attrs:{label:"闸站名称："}},[t("el-select",{attrs:{clearable:"","popper-append-to-body":!1,"no-data-text":"数据为空显示此处信息",filterable:"",placeholder:"请选择闸站名称："},on:{change:e.findGate},model:{value:e.form.stationName,callback:function(t){e.$set(e.form,"stationName",t)},expression:"form.stationName"}},e._l(e.tableDataPump,(function(e,a){return t("el-option",{key:a,attrs:{label:e.stationName,value:e.id}})})),1)],1),t("el-form-item",{attrs:{label:"闸门名称："}},[t("el-select",{attrs:{clearable:"","popper-append-to-body":!1,"collapse-tags":"","no-data-text":"数据为空显示此处信息",filterable:"",placeholder:"请选择闸门名称："},model:{value:e.form.gtname,callback:function(t){e.$set(e.form,"gtname",t)},expression:"form.gtname"}},e._l(e.dataPump,(function(e,a){return t("el-option",{key:a,attrs:{label:e.gtname,value:e.gtname}})})),1)],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("查询")])],1)],1)],1),t("div",{staticClass:"echartsPicu"}),t("div",{staticClass:"table-two"},[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableDataList,border:"",height:"650","header-cell-style":{background:"#f8f8f8",color:"#000000"},"default-sort":{prop:"clltm",order:"descending"},"highlight-current-row":""},on:{"current-change":e.handleCurrentChange}},[t("el-table-column",{attrs:{type:"index",fixed:"",width:"50",label:"序号",align:"center"}}),t("el-table-column",{attrs:{prop:"gongChengRealTimeSluVo.prjnmcd",fixed:"",align:"center",width:"180",label:"闸站名称"}}),t("el-table-column",{attrs:{prop:"gongChengRealTimeSluVo.gtname",fixed:"",align:"center",width:"180",label:"闸门名称"}}),t("el-table-column",{attrs:{prop:"gongChengRealTimeSluVo.clltm",fixed:"",align:"center",width:"180",label:"采集时间"}}),t("el-table-column",{attrs:{prop:"gongChengRealTimeSluVo.gtkd",align:"center",width:"180",label:"闸门开度"}}),t("el-table-column",{attrs:{prop:"gongChengRealTimeSluVo.ua",label:"相电压Ua（V）",align:"center"}}),t("el-table-column",{attrs:{prop:"gongChengRealTimeSluVo.ub",label:"相电压Ub（V）",align:"center"}}),t("el-table-column",{attrs:{prop:"gongChengRealTimeSluVo.uc",label:"相电压Uc（V）",align:"center"}}),t("el-table-column",{attrs:{prop:"gongChengRealTimeSluVo.ia",align:"center",width:"180",label:"电流Ia(A)"}}),t("el-table-column",{attrs:{prop:"gongChengRealTimeSluVo.ib",align:"center",width:"180",label:"电流Ib(A)"}}),t("el-table-column",{attrs:{prop:"gongChengRealTimeSluVo.ic",align:"center",width:"180",label:"电流Ic(A)"}}),t("el-table-column",{attrs:{prop:"gongChengRealTimeSluVo.activepower",label:"总有功功率(kW)",align:"center"}}),t("el-table-column",{attrs:{prop:"gongChengRealTimeSluVo.reactivepower",label:"总无功功率(kVar)",align:"center"}}),t("el-table-column",{attrs:{prop:"gongChengRealTimeSluVo.f",label:"频率(Hz)",align:"center"}}),t("el-table-column",{attrs:{prop:"gongChengRealTimeSluVo.pf",label:"功率因数",align:"center"}}),t("el-table-column",{attrs:{prop:"gongChengRealTimeSluVo.bak1",label:"线电压Uab(V)",align:"center"}}),t("el-table-column",{attrs:{prop:"gongChengRealTimeSluVo.bak2",label:"线电压Ubc(V)",align:"center"}}),t("el-table-column",{attrs:{prop:"gongChengRealTimeSluVo.bak3",label:"线电压Uca(V)",align:"center"}})],1)],1)])])},n=[],i=(a(57658),a(87231)),r={components:{},data(){return{filterText:"",TreeData:[],dataPump:[],total:0,pageSize:10,pageNo:1,currentPage:1,tableDataPump:[],form:{gtname:"",stationName:""},defaultProps:{children:"children",label:"label"},pumpName:"",tableData:[{date:"2016-05-03",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"},{date:"2016-05-02",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"}],tableDataList:[]}},watch:{filterText(e){this.$refs.tree.filter(e)}},created(){this.getShuiZhaTreeData()},methods:{filterNode(e,t){return!e||-1!==t.label.indexOf(e)},getShuiZhaTreeData(){(0,i.cY)().then((e=>{if(200==e.code){if(e.result&&e.result.length){let t=e.result;t.forEach((e=>{let t={};t.id=e.sluTreeVo.id,t.leaf=e.sluTreeVo.leaf,t.label=e.sluTreeVo.name,e.sluTreeVo.children&&null!=e.sluTreeVo.children&&(t.children=[],e.sluTreeVo.children.forEach((e=>{let a={};a.id=e.id,a.leaf=e.leaf,a.label=e.name,e.children&&null!=e.children&&(a.children=[],e.children.forEach((e=>{let t={};t.id=e.id,t.label=e.name,t.leaf=e.leaf,a.children.push(t),this.tableDataPump.push({stationName:e.name,id:e.id})}))),t.children.push(a)}))),this.TreeData.push(t)})),this.TreeData[0]&&(this.selectId=this.TreeData[0].id,this.selectleaf=0,this.getPump(this.TreeData[0].id,0))}}else this.$message.error(e.message)})).catch((e=>{this.$message.error(e)}))},handleNodeClick(e){console.log(e,"item"),this.form.stationName="",this.selectId=e.id,this.selectleaf=e.leaf,this.getPump(e.id,e.leaf),this.tableDataPump=[],"0"==e.leaf?(0,i.cY)().then((t=>{if(200==t.code){if(t.result&&t.result.length){let a=t.result;a.forEach((t=>{let a={};a.id=t.sluTreeVo.id,a.leaf=t.sluTreeVo.leaf,a.label=t.sluTreeVo.name,t.sluTreeVo.children&&null!=t.sluTreeVo.children&&e.id!=t.sluTreeVo.id?(a.children=[],t.sluTreeVo.children.forEach((t=>{let l={};l.id=t.id,l.leaf=t.leaf,l.label=t.name,t.children&&null!=t.children&&e.id==t.id?(l.children=[],t.children.forEach((e=>{let t={};t.id=e.id,t.label=e.name,t.leaf=e.leaf,l.children.push(t),this.tableDataPump.push({stationName:e.name,id:e.id})}))):a.children.push(l)}))):t.sluTreeVo.children&&null!=t.sluTreeVo.children&&e.id==t.sluTreeVo.id&&(a.children=[],t.sluTreeVo.children.forEach((e=>{let t={};t.id=e.id,t.leaf=e.leaf,t.label=e.name,e.children&&null!=e.children&&(t.children=[],e.children.forEach((e=>{let a={};a.id=e.id,a.label=e.name,a.leaf=e.leaf,t.children.push(a),this.tableDataPump.push({stationName:e.name,id:e.id})}))),a.children.push(t)})))}))}}else this.$message.error(t.message)})).catch((e=>{this.$message.error(e)})):this.tableDataPump.push({stationName:e.label,id:e.id})},getPump(e,t){const a={id:e,pageSize:this.pageSize,pageNo:this.pageNo,leaf:t};console.log(e),(0,i.mt)(a).then((e=>{200==e.code?e.result&&e.result.length&&(this.tableDataList=e.result,this.total=e.result.total):this.$message.error(e.message)})).catch((e=>{this.$message.error(e)}))},findGate(e){if(""!=e){this.tableDataPump.forEach((t=>{t.id==e&&(this.form.stationName=t.stationName)}));const t={id:e,leaf:1};(0,i.mt)(t).then((e=>{200==e.code?(this.dataPump=[],e.result&&e.result.length&&e.result.forEach((e=>{this.dataPump.push({gtname:e.gongChengRealTimeSluVo.gtname})}))):this.$message.error(e.message)})).catch((e=>{this.$message.error(e)}))}},onSubmit(){const e={id:this.selectId,pageSize:this.pageSize,pageNo:this.pageNo,leaf:this.selectleaf};""!=this.form.gtname?e.gtname=this.form.gtname:""!=this.form.stationName&&this.$message.error("请选择闸门名称"),(0,i.mt)(e).then((e=>{200==e.code?e.result&&e.result.length&&(this.tableDataList=e.result,this.total=e.result.total):this.$message.error(e.message)})).catch((e=>{this.$message.error(e)}))},handleSizeChange(e){this.pageSize=e,this.onSubmit(),console.log(`每页 ${e} 条`)},handleCurrentChange(e){this.pageNo=e,this.onSubmit(),console.log(`当前页: ${e}`)}}},o=r,s=a(1001),h=(0,s.Z)(o,l,n,!1,null,"7f2fd7fb",null),c=h.exports},87231:function(e,t,a){a.d(t,{F:function(){return g},JB:function(){return o},W0:function(){return s},_N:function(){return i},cY:function(){return n},fi:function(){return c},mt:function(){return r},yS:function(){return h}});var l=a(16391);const n=e=>(0,l.Z)({url:"/mainBizGongCheng/open/getShuiZhaTreeInfo",method:"GET",params:e}),i=e=>(0,l.Z)({url:"/mainBizGongCheng/open/getBengZhanTreeInfo",method:"GET",params:e}),r=e=>(0,l.Z)({url:"/mainBizGongCheng/open/getShuiZhaRealGongQingData",method:"GET",params:e}),o=e=>(0,l.Z)({url:"/mainBizGongCheng/open/getBengZhanRealGongQingData",method:"GET",params:e}),s=e=>(0,l.Z)({url:"/mainBizGongCheng/open/getShuiZhaAllHisGongQingData",method:"GET",params:e}),h=e=>(0,l.Z)({url:"/mainBizGongCheng/open/getBengZhanAllHisGongQingData",method:"GET",params:e}),c=e=>(0,l.Z)({url:"/mainBizGongCheng/open/getShuiZhaPageHisGongQingData",method:"GET",params:e}),g=e=>(0,l.Z)({url:"/mainBizGongCheng/open/getBengZhanPageHisGongQingData",method:"GET",params:e})}}]);