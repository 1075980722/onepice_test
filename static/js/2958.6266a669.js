"use strict";(self["webpackChunkonepic"]=self["webpackChunkonepic"]||[]).push([[2958],{50405:function(e,t,i){i.d(t,{AM:function(){return f}});i(57658);var s=i(61445),n=i(92698),r=i(81653),o=i(86232),a=i(93622),l=i(58006),h=(i(94315),i(77623)),c=i(42484),u=i(60289);const d=-1;let f=class extends n.Z{constructor(e){super(e),this._from=null,this._to=null,this._final=null,this._current=[],this._time=0,this.duration=(0,r.Z)("mapview-transitions-duration"),this.effects=[]}set effect(e){if(this._get("effect")!==(e=e||"")){this._set("effect",e);try{this._transitionTo(p(e))}catch(t){this._transitionTo([]),a.Z.getLogger(this.declaredClass).warn("Invalid Effect",{effect:e,error:t})}}}get hasEffects(){return this.transitioning||!!this.effects.length}set scale(e){this._updateForScale(e)}get transitioning(){return null!==this._to}canTransitionTo(e){try{return this.scale>0&&v(this._current,p(e),this.scale)}catch{return!1}}transitionStep(e,t){this._applyTimeTransition(e),this._updateForScale(t)}endTransitions(){this._applyTimeTransition(this.duration)}_transitionTo(e){this.scale>0&&v(this._current,e,this.scale)?(this._final=e,this._to=(0,o.d9)(e),g(this._current,this._to,this.scale),this._from=(0,o.d9)(this._current),this._time=0):(this._from=this._to=this._final=null,this._current=e),this._set("effects",this._current[0]?(0,o.d9)(this._current[0].effects):[])}_applyTimeTransition(e){if(!(this._to&&this._from&&this._current&&this._final))return;this._time+=e;const t=Math.min(1,this._time/this.duration);for(let i=0;i<this._current.length;i++){const e=this._current[i],s=this._from[i],n=this._to[i];e.scale=_(s.scale,n.scale,t);for(let i=0;i<e.effects.length;i++){const r=e.effects[i],o=s.effects[i],a=n.effects[i];r.interpolate(o,a,t)}}1===t&&(this._current=this._final,this._set("effects",this._current[0]?(0,o.d9)(this._current[0].effects):[]),this._from=this._to=this._final=null)}_updateForScale(e){if(this._set("scale",e),0===this._current.length)return;const t=this._current,i=this._current.length-1;let s,n,r=1;if(1===t.length||e>=t[0].scale)n=s=t[0].effects;else if(e<=t[i].scale)n=s=t[i].effects;else for(let o=0;o<i;o++){const i=t[o],a=t[o+1];if(i.scale>=e&&a.scale<=e){r=(e-i.scale)/(a.scale-i.scale),s=i.effects,n=a.effects;break}}for(let o=0;o<this.effects.length;o++)this.effects[o].interpolate(s[o],n[o],r)}};function p(e){const t=(0,c.Q)(e)||[];return m(t)?[{scale:d,effects:t}]:t}function v(e,t,i){return!e[0]?.effects||!t[0]?.effects||!((e[0]?.scale===d||t[0]?.scale===d)&&(e.length>1||t.length>1)&&i<=0)&&(0,u.AS)(e[0].effects,t[0].effects)}function g(e,t,i){const s=e.length>t.length?e:t,n=e.length>t.length?t:e,r=n[n.length-1],o=r?.scale??i,a=r?.effects??[];for(let l=n.length;l<s.length;l++)n.push({scale:o,effects:[...a]});for(let l=0;l<s.length;l++)n[l].scale=n[l].scale===d?i:n[l].scale,s[l].scale=s[l].scale===d?i:s[l].scale,(0,u.uF)(n[l].effects,s[l].effects)}function _(e,t,i){return e+(t-e)*i}function m(e){const t=e[0];return!!t&&"type"in t}(0,s._)([(0,l.Cb)()],f.prototype,"_to",void 0),(0,s._)([(0,l.Cb)()],f.prototype,"duration",void 0),(0,s._)([(0,l.Cb)({value:""})],f.prototype,"effect",null),(0,s._)([(0,l.Cb)({readOnly:!0})],f.prototype,"effects",void 0),(0,s._)([(0,l.Cb)({readOnly:!0})],f.prototype,"hasEffects",null),(0,s._)([(0,l.Cb)({value:0})],f.prototype,"scale",null),(0,s._)([(0,l.Cb)({readOnly:!0})],f.prototype,"transitioning",null),f=(0,s._)([(0,h.j)("esri.layers.effects.EffectView")],f)},32988:function(e,t,i){i.d(t,{W:function(){return a}});i(57658);var s=i(57409),n=i(50405),r=i(75393),o=i(41417);class a extends r.s{constructor(){super(...arguments),this._childrenSet=new Set,this._needsSort=!1,this.children=[],this._effectView=null,this._highlightOptions=null,this._highlightGradient=null}get blendMode(){return this._blendMode}set blendMode(e){this._blendMode=e,this.requestRender()}get clips(){return this._clips}set clips(e){this._clips=e,this.children.forEach((t=>t.clips=e))}get computedEffects(){return this._effectView?.effects??null}get effect(){return this._effectView?.effect??""}set effect(e){(this._effectView||e)&&(this._effectView||(this._effectView=new n.AM),this._effectView.effect=e,this.requestRender())}get highlightOptions(){return this._highlightOptions}set highlightOptions(e){if(!e)return this._highlightOptions=null,void(this._highlightGradient&&(this._highlightGradient.destroy(),this._highlightGradient=null,this.requestRender()));this._highlightOptions&&this._highlightOptions.equals(e)||(this._highlightOptions=e,this._highlightGradient||(this._highlightGradient=new o.Z),this._highlightGradient.setHighlightOptions(e),this.requestRender())}updateTransitionProperties(e,t){super.updateTransitionProperties(e,t),this._effectView&&(this._effectView.transitionStep(e,t),this._effectView.transitioning&&this.requestRender())}doRender(e){const t=this.createRenderParams(e);this.renderChildren(t)}addChild(e){return this.addChildAt(e,this.children.length)}addChildAt(e,t=this.children.length){if(!e)return e;if(this.contains(e))return e;this._needsSort=!0;const i=e.parent;return i&&i!==this&&i.removeChild(e),t>=this.children.length?this.children.push(e):this.children.splice(t,0,e),this._childrenSet.add(e),e.parent=this,e.stage=this.stage,this!==this.stage&&(e.clips=this.clips),this.requestRender(),e}contains(e){return this._childrenSet.has(e)}endTransitions(){super.endTransitions(),this._effectView&&(this._effectView.endTransitions(),this.requestRender())}removeAllChildren(){this._childrenSet.clear(),this._needsSort=!0;for(const e of this.children)this!==this.stage&&(e.clips=null),e.stage=null,e.parent=null;this.children.length=0}removeChild(e){return this.contains(e)?this.removeChildAt(this.children.indexOf(e)):e}removeChildAt(e){if(e<0||e>=this.children.length)return null;this._needsSort=!0;const t=this.children.splice(e,1)[0];return this._childrenSet.delete(t),this!==this.stage&&(t.clips=null),t.stage=null,t.parent=null,t}sortChildren(e){this._needsSort&&(this.children.sort(e),this._needsSort=!1)}beforeRender(e){super.beforeRender(e);for(const t of this.children)t.beforeRender(e)}afterRender(e){super.afterRender(e);for(const t of this.children)t.afterRender(e)}_createTransforms(){return{dvs:(0,s.c)()}}onAttach(){super.onAttach();const e=this.stage;for(const t of this.children)t.stage=e}onDetach(){super.onDetach();for(const e of this.children)e.stage=null}renderChildren(e){for(const t of this.children)t.processRender(e)}createRenderParams(e){return{...e,blendMode:this.blendMode,effects:this.computedEffects,globalOpacity:e.globalOpacity*this.computedOpacity,inFadeTransition:this.inFadeTransition,highlightGradient:this._highlightGradient||e.highlightGradient}}}},75393:function(e,t,i){i.d(t,{s:function(){return l}});var s=i(96545),n=i(81653),r=i(8693),o=i(92454);const a=1/(0,n.Z)("mapview-transitions-duration");class l extends s.Z{constructor(){super(...arguments),this._fadeOutResolver=null,this._fadeInResolver=null,this._clips=null,this.computedVisible=!0,this.computedOpacity=1,this.fadeTransitionEnabled=!1,this.inFadeTransition=!1,this._isReady=!1,this._opacity=1,this.parent=null,this._stage=null,this._visible=!0}get clips(){return this._clips}set clips(e){this._clips=e,this.requestRender()}get isReady(){return this._isReady}get opacity(){return this._opacity}set opacity(e){this._opacity!==e&&(this._opacity=Math.min(1,Math.max(e,0)),this.requestRender())}get stage(){return this._stage}set stage(e){if(this._stage===e)return;const t=this._stage;this._stage=e,e?this._stage?.untrashDisplayObject(this)||(this.onAttach(),this.emit("attach")):t?.trashDisplayObject(this)}get transforms(){return this._getTransforms()}_getTransforms(){return(0,r.Wi)(this._transforms)&&(this._transforms=this._createTransforms()),this._transforms}get visible(){return this._visible}set visible(e){this._visible!==e&&(this._visible=e,this.requestRender())}fadeIn(){return this._fadeInResolver||(this._fadeOutResolver&&(this._fadeOutResolver(),this._fadeOutResolver=null),this.opacity=1,this.computedOpacity=0,this.fadeTransitionEnabled=!0,this._fadeInResolver=(0,o.hh)(),this.requestRender()),this._fadeInResolver.promise}fadeOut(){return this._fadeOutResolver||(this.opacity=0,this._fadeInResolver&&(this._fadeInResolver(),this._fadeInResolver=null),this.fadeTransitionEnabled=!0,this._fadeOutResolver=(0,o.hh)(),this.requestRender()),this._fadeOutResolver.promise}endTransitions(){this._fadeInResolver?.(),this._fadeInResolver=null,this._fadeOutResolver?.(),this._fadeOutResolver=null,this.computedOpacity=this.visible?this.opacity:0,this.requestRender()}beforeRender(e){this.updateTransitionProperties(e.deltaTime,e.state.scale)}afterRender(e){this._fadeInResolver&&this.computedOpacity===this.opacity?(this._fadeInResolver(),this._fadeInResolver=null):this._fadeOutResolver&&0===this.computedOpacity&&(this._fadeOutResolver(),this._fadeOutResolver=null)}remove(){this.parent?.removeChild(this)}setTransform(e){}processRender(e){this.stage&&this.computedVisible&&this.doRender(e)}requestRender(){this.stage&&this.stage.requestRender()}processDetach(){this._fadeInResolver&&(this._fadeInResolver(),this._fadeInResolver=null),this._fadeOutResolver&&(this._fadeOutResolver(),this._fadeOutResolver=null),this.onDetach(),this.emit("detach")}updateTransitionProperties(e,t){if(this.fadeTransitionEnabled){const t=this._fadeOutResolver||!this.visible?0:this.opacity,i=this.computedOpacity;if(i===t)this.computedVisible=this.visible;else{const s=e*a;this.computedOpacity=i>t?Math.max(t,i-s):Math.min(t,i+s),this.computedVisible=this.computedOpacity>0;const n=t===this.computedOpacity;this.inFadeTransition=!n,n||this.requestRender()}}else this.computedOpacity=this.opacity,this.computedVisible=this.visible}onAttach(){}onDetach(){}doRender(e){}ready(){this._isReady||(this._isReady=!0,this.emit("isReady"),this.requestRender())}}},17962:function(e,t,i){var s,n;function r(e){switch(e){case"left":return s.Left;case"right":return s.Right;case"center":return s.Center}}function o(e){switch(e){case"top":return n.Top;case"middle":return n.Center;case"baseline":return n.Baseline;case"bottom":return n.Bottom}}function a(e){switch(e){case"above-left":case"esriServerPointLabelPlacementAboveLeft":return[s.Right,n.Bottom];case"above-center":case"above-along":case"esriServerPointLabelPlacementAboveCenter":case"esriServerLinePlacementAboveAlong":return[s.Center,n.Bottom];case"above-right":case"esriServerPointLabelPlacementAboveRight":return[s.Left,n.Bottom];case"center-left":case"esriServerPointLabelPlacementCenterLeft":return[s.Right,n.Center];case"center-center":case"center-along":case"esriServerPointLabelPlacementCenterCenter":case"esriServerLinePlacementCenterAlong":case"always-horizontal":case"esriServerPolygonPlacementAlwaysHorizontal":return[s.Center,n.Center];case"center-right":case"esriServerPointLabelPlacementCenterRight":return[s.Left,n.Center];case"below-left":case"esriServerPointLabelPlacementBelowLeft":return[s.Right,n.Top];case"below-center":case"below-along":case"esriServerPointLabelPlacementBelowCenter":case"esriServerLinePlacementBelowAlong":return[s.Center,n.Top];case"below-right":case"esriServerPointLabelPlacementBelowRight":return[s.Left,n.Top];default:return console.debug(`Found invalid placement type ${e}`),[s.Center,n.Center]}}function l(e){switch(e){case s.Right:return-1;case s.Center:return 0;case s.Left:return 1;default:return console.debug(`Found invalid horizontal alignment ${e}`),0}}function h(e){switch(e){case n.Top:return 1;case n.Center:return 0;case n.Bottom:case n.Baseline:return-1;default:return console.debug(`Found invalid vertical alignment ${e}`),0}}function c(e){switch(e){case"left":return s.Left;case"right":return s.Right;case"center":return s.Center}}function u(e){switch(e){case"above-along":case"below-along":case"center-along":case"esriServerLinePlacementAboveAlong":case"esriServerLinePlacementBelowAlong":case"esriServerLinePlacementCenterAlong":return!0;default:return!1}}i.d(t,{Hd:function(){return c},M7:function(){return s},NS:function(){return u},TR:function(){return n},b7:function(){return o},g:function(){return l},kH:function(){return r},qv:function(){return a},tf:function(){return h}}),function(e){e[e.Left=-1]="Left",e[e.Center=0]="Center",e[e.Right=1]="Right"}(s||(s={})),function(e){e[e.Top=1]="Top",e[e.Center=0]="Center",e[e.Bottom=-1]="Bottom",e[e.Baseline=2]="Baseline"}(n||(n={}))},41417:function(e,t,i){i.d(t,{Z:function(){return u}});i(23767),i(8585),i(68696);var s=i(93622),n=i(19440),r=i(47799),o=i(17923),a=i(29964);const l=s.Z.getLogger("esri.views.2d.engine.webgl.painter.highlight.HighlightGradient");function h(e,t){t.fillColor[0]=e.color.r/255,t.fillColor[1]=e.color.g/255,t.fillColor[2]=e.color.b/255,t.fillColor[3]=e.color.a,e.haloColor?(t.outlineColor[0]=e.haloColor.r/255,t.outlineColor[1]=e.haloColor.g/255,t.outlineColor[2]=e.haloColor.b/255,t.outlineColor[3]=e.haloColor.a):(t.outlineColor[0]=t.fillColor[0],t.outlineColor[1]=t.fillColor[1],t.outlineColor[2]=t.fillColor[2],t.outlineColor[3]=t.fillColor[3]),t.fillColor[3]*=e.fillOpacity,t.outlineColor[3]*=e.haloOpacity,t.fillColor[0]*=t.fillColor[3],t.fillColor[1]*=t.fillColor[3],t.fillColor[2]*=t.fillColor[3],t.outlineColor[0]*=t.outlineColor[3],t.outlineColor[1]*=t.outlineColor[3],t.outlineColor[2]*=t.outlineColor[3],t.outlineWidth=r.OQ.outlineWidth,t.outerHaloWidth=r.OQ.outerHaloWidth,t.innerHaloWidth=r.OQ.innerHaloWidth,t.outlinePosition=r.OQ.outlinePosition}const c=[0,0,0,0];class u{constructor(){this._convertedHighlightOptions={fillColor:[.2*.75,.6*.75,.675,.75],outlineColor:[.2*.9,.54,.81,.9],outlinePosition:r.OQ.outlinePosition,outlineWidth:r.OQ.outlineWidth,innerHaloWidth:r.OQ.innerHaloWidth,outerHaloWidth:r.OQ.outerHaloWidth},this._shadeTexChanged=!0,this._texelData=new Uint8Array(4*r.Ft),this._minMaxDistance=[0,0]}setHighlightOptions(e){const t=this._convertedHighlightOptions;h(e,t);const i=t.outlinePosition-t.outlineWidth/2-t.outerHaloWidth,s=t.outlinePosition-t.outlineWidth/2,n=t.outlinePosition+t.outlineWidth/2,o=t.outlinePosition+t.outlineWidth/2+t.innerHaloWidth,a=Math.sqrt(Math.PI/2)*r.tM,u=Math.abs(i)>a?Math.round(10*(Math.abs(i)-a))/10:0,d=Math.abs(o)>a?Math.round(10*(Math.abs(o)-a))/10:0;let f;u&&!d?l.error("The outer rim of the highlight is "+u+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards positive values (inwards)."):!u&&d?l.error("The inner rim of the highlight is "+d+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards negative values (outwards)."):u&&d&&l.error("The highlight is "+Math.max(u,d)+"px away from the edge of the feature; consider reducing some width values.");const p=[void 0,void 0,void 0,void 0];function v(e,t,i){p[0]=(1-i)*e[0]+i*t[0],p[1]=(1-i)*e[1]+i*t[1],p[2]=(1-i)*e[2]+i*t[2],p[3]=(1-i)*e[3]+i*t[3]}const{_texelData:g}=this;for(let l=0;l<r.Ft;++l)f=i+l/(r.Ft-1)*(o-i),f<i?(p[4*l+0]=0,p[4*l+1]=0,p[4*l+2]=0,p[4*l+3]=0):f<s?v(c,t.outlineColor,(f-i)/(s-i)):f<n?[p[0],p[1],p[2],p[3]]=t.outlineColor:f<o?v(t.outlineColor,t.fillColor,(f-n)/(o-n)):[p[4*l+0],p[4*l+1],p[4*l+2],p[4*l+3]]=t.fillColor,g[4*l+0]=255*p[0],g[4*l+1]=255*p[1],g[4*l+2]=255*p[2],g[4*l+3]=255*p[3];this._minMaxDistance[0]=i,this._minMaxDistance[1]=o,this._shadeTexChanged=!0}applyHighlightOptions(e,t){this._shadeTex||(this._shadeTex=new a.x(e,{target:o.No.TEXTURE_2D,pixelFormat:o.VI.RGBA,dataType:o.Br.UNSIGNED_BYTE,wrapMode:o.e8.CLAMP_TO_EDGE,width:r.Ft,height:1,samplingMode:o.cw.LINEAR})),this._shadeTexChanged&&(this._shadeTex.updateData(0,0,0,r.Ft,1,this._texelData),this._shadeTexChanged=!1),e.bindTexture(this._shadeTex,n.Jw),t.setUniform2fv("u_minMaxDistance",this._minMaxDistance)}destroy(){this._shadeTex?.dispose(),this._shadeTex=null}}},47799:function(e,t,i){i.d(t,{Ft:function(){return o},OQ:function(){return a},QU:function(){return r},n5:function(){return n},tM:function(){return s}});const s=1,n=[0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],r=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],o=256,a={outlineWidth:1.3,outerHaloWidth:.4,innerHaloWidth:.4,outlinePosition:0}},62055:function(e,t,i){i.d(t,{CA:function(){return E},Gq:function(){return U},Xp:function(){return L},a:function(){return B},dk:function(){return P},hF:function(){return A},jj:function(){return w},jy:function(){return O},m2:function(){return M},mE:function(){return D},qr:function(){return W}});var s=i(22130),n=i(17962),r=i(34150);function o(e,t,i){const s=r.X.SIZE_FIELD_STOPS|r.X.SIZE_MINMAX_VALUE|r.X.SIZE_SCALE_STOPS|r.X.SIZE_UNIT_VALUE,n=(t&(r.mf.FIELD_TARGETS_OUTLINE|r.mf.MINMAX_TARGETS_OUTLINE|r.mf.SCALE_TARGETS_OUTLINE|r.mf.UNIT_TARGETS_OUTLINE))>>>4;return e===r.LW.LINE&&i.isOutline||e===r.LW.FILL&&O(i.symbologyType)?s&n:s&~n}const a=0,l=8,h=7,c=8,u=11,d=11,f=12,p=13,v=14,g=15,_=16,m=17,y=18,S=19,T=20,b=21,C=26,R=Object.keys(r.mD).filter((e=>"number"==typeof r.mD[e])).reduce(((e,t)=>({...e,[t]:r.mD[t]})),{});function V(e){return e===r.mD.SIMPLE||e===r.mD.OUTLINE_FILL_SIMPLE}function O(e){return e===r.mD.OUTLINE_FILL||e===r.mD.OUTLINE_FILL_SIMPLE}function L(e){return V(e.symbologyType)}function E(e){return O(e.symbologyType)}function w(e,t){switch(e){case r.LW.FILL:return P.from(t);case r.LW.LINE:return B.from(t);case r.LW.MARKER:return D.from(t);case r.LW.TEXT:return W.from(t);case r.LW.LABEL:return U.from(t);default:throw new Error(`Unable to createMaterialKey for unknown geometryType ${e}`)}}function A(e){switch(M.load(e).geometryType){case r.LW.MARKER:return new D(e);case r.LW.FILL:return new P(e);case r.LW.LINE:return new B(e);case r.LW.TEXT:return new W(e);case r.LW.LABEL:return new U(e)}}class M{static load(e){const t=this.shared;return t.data=e,t}constructor(e){this._data=0,this._data=e}set data(e){this._data=e??0}get data(){return this._data}get geometryType(){return this.bits(c,u)}set geometryType(e){this.setBits(e,c,u)}get mapAligned(){return!!this.bit(T)}set mapAligned(e){this.setBit(T,e)}get sdf(){return!!this.bit(d)}set sdf(e){this.setBit(d,e??!1)}get pattern(){return!!this.bit(f)}set pattern(e){this.setBit(f,e)}get textureBinding(){return this.bits(a,l)}set textureBinding(e){this.setBits(e,a,l)}get symbologyType(){return this.bits(b,C)}set symbologyType(e){this.setBits(e,b,C)}get geometryTypeString(){switch(this.geometryType){case r.LW.FILL:return"fill";case r.LW.MARKER:return"marker";case r.LW.LINE:return"line";case r.LW.TEXT:return"text";case r.LW.LABEL:return"label";default:throw new s.Z(`Unable to handle unknown geometryType: ${this.geometryType}`)}}setBit(e,t){const i=1<<e;t?this._data|=i:this._data&=~i}bit(e){return(this._data&1<<e)>>e}setBits(e,t,i){for(let s=t,n=0;s<i;s++,n++)this.setBit(s,0!=(e&1<<n))}bits(e,t){let i=0;for(let s=e,n=0;s<t;s++,n++)i|=this.bit(s)<<n;return i}hasVV(){return!1}setVV(e,t){}getVariation(){return{mapAligned:this.mapAligned,pattern:this.pattern,sdf:this.sdf,symbologyType:{value:r.mD[this.symbologyType],options:R,namespace:"SYMBOLOGY_TYPE"}}}getVariationHash(){return this._data&~(h&this.textureBinding)}}M.shared=new M(0);const I=e=>class extends e{get vvSizeMinMaxValue(){return 0!==this.bit(_)}set vvSizeMinMaxValue(e){this.setBit(_,e)}get vvSizeScaleStops(){return 0!==this.bit(m)}set vvSizeScaleStops(e){this.setBit(m,e)}get vvSizeFieldStops(){return 0!==this.bit(y)}set vvSizeFieldStops(e){this.setBit(y,e)}get vvSizeUnitValue(){return 0!==this.bit(S)}set vvSizeUnitValue(e){this.setBit(S,e)}hasVV(){return super.hasVV()||this.vvSizeMinMaxValue||this.vvSizeScaleStops||this.vvSizeFieldStops||this.vvSizeUnitValue}setVV(e,t){super.setVV(e,t);const i=o(this.geometryType,e,t)&e;this.vvSizeMinMaxValue=!!(i&r.X.SIZE_MINMAX_VALUE),this.vvSizeFieldStops=!!(i&r.X.SIZE_FIELD_STOPS),this.vvSizeUnitValue=!!(i&r.X.SIZE_UNIT_VALUE),this.vvSizeScaleStops=!!(i&r.X.SIZE_SCALE_STOPS)}},x=e=>class extends e{get vvRotation(){return 0!==this.bit(g)}set vvRotation(e){this.setBit(g,e)}hasVV(){return super.hasVV()||this.vvRotation}setVV(e,t){super.setVV(e,t),this.vvRotation=!t.isOutline&&!!(e&r.X.ROTATION)}},F=e=>class extends e{get vvColor(){return 0!==this.bit(p)}set vvColor(e){this.setBit(p,e)}hasVV(){return super.hasVV()||this.vvColor}setVV(e,t){super.setVV(e,t),this.vvColor=!t.isOutline&&!!(e&r.X.COLOR)}},z=e=>class extends e{get vvOpacity(){return 0!==this.bit(v)}set vvOpacity(e){this.setBit(v,e)}hasVV(){return super.hasVV()||this.vvOpacity}setVV(e,t){super.setVV(e,t),this.vvOpacity=!t.isOutline&&!!(e&r.X.OPACITY)}};class P extends(F(z(I(M)))){static load(e){const t=this.shared;return t.data=e,t}static from(e){const{symbologyType:t,vvFlags:i}=e,s=this.load(0);return s.geometryType=r.LW.FILL,s.symbologyType=t,t!==r.mD.DOT_DENSITY&&s.setVV(i,e),s.data}getVariation(){return{...super.getVariation(),vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}P.shared=new P(0);class D extends(F(z(x(I(M))))){static load(e){const t=this.shared;return t.data=e,t}static from(e){const{symbologyType:t,vvFlags:i}=e,s=this.load(0);return s.geometryType=r.LW.MARKER,s.symbologyType=t,t!==r.mD.HEATMAP&&s.setVV(i,e),s.data}getVariation(){return{...super.getVariation(),vvColor:this.vvColor,vvRotation:this.vvRotation,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}D.shared=new D(0);class B extends(F(z(I(M)))){static load(e){const t=this.shared;return t.data=e,t}static from(e){const t=this.load(0);return t.geometryType=r.LW.LINE,t.symbologyType=e.symbologyType,t.setVV(e.vvFlags,e),t.data}getVariation(){return{...super.getVariation(),vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}B.shared=new B(0);class W extends(F(z(x(I(M))))){static load(e){const t=this.shared;return t.data=e,t}static from(e){const t=this.load(0);return t.geometryType=r.LW.TEXT,t.symbologyType=e.symbologyType,t.setVV(e.vvFlags,e),t.data}getVariation(){return{...super.getVariation(),vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvRotation:this.vvRotation,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}W.shared=new W(0);class U extends(I(M)){static load(e){const t=this.shared;return t.data=e,t}static from(e){const t=this.load(0);return t.geometryType=r.LW.LABEL,t.symbologyType=e.symbologyType,t.setVV(e.vvFlags,e),t.mapAligned=(0,n.NS)(e.placement),t.data}getVariation(){return{...super.getVariation(),vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}U.shared=new U(0)},17528:function(e,t,i){i.d(t,{v:function(){return n}});var s=i(8693);class n{static getStorageSpec(e){return null}static createOrUpdateRendererSchema(e,t){return(0,s.pC)(e)&&"default"===e.type?e:{type:"default"}}static getVariation(e){return{}}static getVariationHash(e){return 0}}n.type="default",n.programSpec=null},78481:function(e,t,i){i.d(t,{T:function(){return l}});i(23767),i(8585),i(68696);var s=i(8693),n=i(32340),r=i(19440),o=i(17528),a=i(17923);class l extends o.v{static getStorageSpec({attributes:e}){return{visualVariables:!1,attributes:e??null}}static _createRendererSchema(){return{type:"dot-density",colors:new Float32Array(32),dotValue:-1,dotSize:-1,dotScale:-1,dotBlending:!1,backgroundColor:new Float32Array(4),activeDots:new Float32Array(8),seed:-1}}static createOrUpdateRendererSchema(e,t){const{attributes:i,dotValue:o,referenceScale:a,dotSize:l,dotBlendingEnabled:h,seed:c,backgroundColor:u}=t,d=(0,s.pC)(e)&&"dot-density"===e.type?e:this._createRendererSchema();d.dotValue=o,d.dotSize=l,d.dotScale=a,d.dotBlending=h,d.seed=c;const{colors:f,activeDots:p,backgroundColor:v}=d;for(let s=0;s<r.$0;s++){const e=s>=i.length?null:i[s].color;(0,n.Vs)(f,e,4*s)}for(let s=0;s<8;s++)p[s]=s<t.attributes.length?1:0;return(0,n.Vs)(v,u),d}static getVariation(e){return{ddDotBlending:e.dotBlending}}static getVariationHash(e){return e.dotBlending?1:0}}l.type="dot-density",l.programSpec={shader:"materials/fill",vertexLayout:{geometry:[{location:0,name:"a_pos",count:2,type:a.g.SHORT},{location:1,name:"a_id",count:3,type:a.g.UNSIGNED_BYTE},{location:2,name:"a_bitset",count:1,type:a.g.UNSIGNED_BYTE},{location:3,name:"a_inverseArea",count:1,type:a.g.FLOAT}]}}},17564:function(e,t,i){i.d(t,{h:function(){return l}});var s=i(8693),n=i(30524),r=i(71290),o=i(17528),a=i(17923);class l extends o.v{static getStorageSpec({field:e,valueExpression:t}){return{visualVariables:!1,attributes:e||t?[{field:e,valueExpression:t}]:null}}static _createRendererSchema(){return{type:"heatmap",radius:-1,referenceScale:-1,isFieldActive:0,minDensity:-1,densityRange:-1,kernel:null,gradient:null,gradientHash:"invalid"}}static createOrUpdateRendererSchema(e,t){const{radius:i,minDensity:o,maxDensity:a,referenceScale:l,field:h,valueExpression:c,colorStops:u}=t,d=a-o,f=h||c?1:0,p=u.map((({color:e,ratio:t})=>`${t}:${e.toString()}`)).join();let v,g=!0;return(0,s.pC)(e)&&"heatmap"===e.type?(v=e,g=p!==e.gradientHash):v=this._createRendererSchema(),v.radius=(0,n.F2)(i),v.minDensity=o,v.densityRange=d,v.referenceScale=l,v.isFieldActive=f,g&&(v.gradient=(0,r.uI)(u),v.gradientHash=p),v}}l.type="heatmap",l.programSpec={shader:"materials/icon/heatmapAccumulate",vertexLayout:{geometry:[{location:0,name:"a_pos",count:2,type:a.g.SHORT},{location:1,name:"a_vertexOffset",count:2,type:a.g.SHORT},{location:4,name:"a_id",count:4,type:a.g.UNSIGNED_BYTE}]}}},21759:function(e,t,i){i.d(t,{c:function(){return c}});i(23767),i(8585),i(68696);var s=i(36945),n=i(8693),r=i(30524),o=i(32340),a=i(19440),l=i(17528),h=i(17923);class c extends l.v{static getStorageSpec({attributes:e}){return{visualVariables:!0,attributes:e??null}}static _createRendererSchema(){return{type:"pie-chart",colors:new Float32Array(4*a.eV),defaultColor:new Float32Array(4),othersColor:new Float32Array(4),outlineColor:new Float32Array(4),holePercentage:0,sectorThreshold:0,outlineWidth:1,numberOfFields:10}}static createOrUpdateRendererSchema(e,t){const{attributes:i,defaultColor:l,holePercentage:h,othersCategory:c,outline:u}=t,d=(0,n.pC)(e)&&"pie-chart"===e.type?e:this._createRendererSchema();for(let n=0;n<a.eV;n++){const e=n>=i.length?new s.Z([0,0,0,0]):i[n].color;(0,o.Vs)(d.colors,e,4*n)}return(0,o.Vs)(d.defaultColor,l),(0,o.Vs)(d.othersColor,c?.color),(0,o.Vs)(d.outlineColor,u?.color),d.outlineWidth=(0,r.F2)(u?.width||0),d.holePercentage=h,d.sectorThreshold=c?.threshold||0,d.numberOfFields=i.length,d}static getVariation(e){return{numberOfFields:e.numberOfFields}}static getVariationHash(e){return e.numberOfFields}}c.type="pie-chart",c.programSpec={shader:"materials/pie",vertexLayout:{geometry:[{location:0,name:"a_pos",count:2,type:h.g.SHORT},{location:1,name:"a_vertexOffset",count:2,type:h.g.SHORT},{location:2,name:"a_texCoords",count:2,type:h.g.UNSIGNED_SHORT},{location:3,name:"a_bitSetAndDistRatio",count:2,type:h.g.UNSIGNED_SHORT},{location:4,name:"a_id",count:4,type:h.g.UNSIGNED_BYTE},{location:5,name:"a_color",count:4,type:h.g.UNSIGNED_BYTE,normalized:!0},{location:6,name:"a_outlineColor",count:4,type:h.g.UNSIGNED_BYTE,normalized:!0},{location:7,name:"a_sizeAndOutlineWidth",count:4,type:h.g.UNSIGNED_BYTE},{location:8,name:"a_zoomRange",count:2,type:h.g.UNSIGNED_SHORT}]},hittestAttributes:["a_vertexOffset","a_texCoords"]}},72136:function(e,t,i){i.d(t,{EJ:function(){return u},a1:function(){return d},t4:function(){return c}});var s=i(22130),n=i(34150),r=i(62055),o=i(17528),a=i(78481),l=i(17564),h=i(21759);function c(e,t){if(e.type!==t)throw new s.Z("material-view-model:unexpected-renderer-schema",`expected to find renderer schema of type "${t}" but found type "${e.type}"`)}function u(e){switch(e?.type){case"dot-density":return a.T;case"heatmap":return l.h;case"pie-chart":return h.c;default:return o.v}}function d(e){const{geometryType:t,symbologyType:i}=r.m2.load(e);switch(t){case n.LW.FILL:if(i===n.mD.DOT_DENSITY)return a.T;break;case n.LW.MARKER:switch(i){case n.mD.HEATMAP:return l.h;case n.mD.PIE_CHART:return h.c}}return o.v}}}]);