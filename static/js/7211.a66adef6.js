"use strict";(self["webpackChunkonepic"]=self["webpackChunkonepic"]||[]).push([[7211],{57211:function(e,a,t){t.r(a),t.d(a,{default:function(){return u}});var l=function(){var e=this,a=e._self._c;return a("div",{staticClass:"rainfulltable"},[a("div",{staticClass:"conditionfilter",style:e.datepicker?"height:21%":"height:15%"},[a("div",{staticClass:"datafrom"},[a("span",[e._v("数据来源:")]),a("el-checkbox-group",{model:{value:e.datafrom,callback:function(a){e.datafrom=a},expression:"datafrom"}},[a("el-checkbox",{attrs:{label:"气象"}}),a("el-checkbox",{attrs:{label:"水文"}}),a("el-checkbox",{attrs:{label:"自建"}})],1)],1),a("div",{staticClass:"filter"},[a("el-select",{attrs:{size:"small","popper-append-to-body":!1,"no-data-text":"数据为空显示此处信息",filterable:"",placeholder:"请选择时间"},on:{change:e.handleChooseTime},model:{value:e.time,callback:function(a){e.time=a},expression:"time"}},e._l(e.timeOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),a("el-select",{staticStyle:{margin:"0 10px"},attrs:{size:"small","popper-append-to-body":!1,"no-data-text":"数据为空显示此处信息",filterable:"",placeholder:"请选择"},model:{value:e.compare,callback:function(a){e.compare=a},expression:"compare"}},[a("el-option",{attrs:{label:">=",value:">="}}),a("el-option",{attrs:{label:">",value:">"}})],1),a("el-input-number",{attrs:{size:"small",step:.5,"controls-position":"right",min:0},on:{change:e.handleNumChange},model:{value:e.num,callback:function(a){e.num=a},expression:"num"}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.datepicker,expression:"datepicker"}],staticClass:"datepicker"},[e._v(" 起: "),a("el-date-picker",{attrs:{size:"small",type:"datetime",placeholder:"选择日期时间"},model:{value:e.date1,callback:function(a){e.date1=a},expression:"date1"}}),e._v(" 止: "),a("el-date-picker",{attrs:{size:"small",type:"datetime",placeholder:"选择日期时间"},model:{value:e.date2,callback:function(a){e.date2=a},expression:"date2"}})],1),a("div",{staticClass:"search"},[a("el-input",{staticStyle:{"margin-right":"0.125rem",width:"2.5rem"},attrs:{size:"small",placeholder:"站名、站码"},model:{value:e.stationInput,callback:function(a){e.stationInput=a},expression:"stationInput"}}),a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-search"},on:{click:e.handleSearch}},[e._v(" 查询 ")])],1)]),a("div",{staticClass:"content",style:e.datepicker?"height:65%":"height:73%"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:"",height:"525","header-cell-style":{padding:0,height:".5rem",background:"#f0f2f5",color:"#606266"},"row-style":{height:"30px"},"cell-style":{padding:"0rem"},border:""}},[e._l(e.columns,(function(e,t){return[a("el-table-column",{key:t,attrs:{fixed:e.fixed,prop:e.data,label:e.title,width:e.width,align:"center"}})]}))],2)],1),a("div",{staticClass:"footer"},[a("span",[e._v("范围选择:")]),a("el-select",{attrs:{size:"small","popper-append-to-body":!1,"no-data-text":"数据为空显示此处信息",filterable:"",placeholder:"请选择范围"},model:{value:e.range,callback:function(a){e.range=a},expression:"range"}},e._l(e.rangeoptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1)])},i=[],n=(t(57658),t(36964)),s={props:{tableData:{type:Array}},data(){return{datafrom:["气象","水文","自建"],stationInput:"",compare:">",num:0,datepicker:!1,date1:new Date,date2:new Date,options:[],time:"近1小时",searchData:"",timeOptions:[{value:"1",label:"近1小时"},{value:"6",label:"前6小时"},{value:"12",label:"前12小时"},{value:"24",label:"前1天"},{value:"48",label:"前2天"},{value:"72",label:"前3天"},{value:"custom",label:"自定义"}],range:"全部",rangeoptions:[{label:"全部",value:"全部"},{label:"0~10",value:"0~10"},{label:"10~25",value:"10~25"},{label:"25~50",value:"25~50"},{label:"50~100",value:"50~100"},{label:"100~250",value:"100~250"},{label:">250",value:">250"}],columns:[{title:"序号",fixed:"fixed",width:"50",data:"id"},{title:"站名",fixed:"fixed",width:"120",data:"name"},{title:"时间",width:"180",data:"collectTime"},{title:"雨量",width:"80",data:"shiDuanYuLiang"},{title:"24h雨量",width:"80",data:"shiDuanYuLiang"}]}},methods:{handleChooseTime(e){this.datepicker="custom"===e},handleSearch(){let e=this.formatDateTime(new Date((new Date).getTime())),a=this.formatDateTime(new Date(new Date((new Date).getTime()-60*this.time*60*1e3)));if(console.log(a,e),""==this.searchData)(0,n.EG)().then((e=>{200==e.code?e.result&&e.result.length&&(this.tableData=[],this.stationInfo=[],e.result.forEach(((e,a)=>{let t={},{collectTime:l,shiDuan:i,shiDuanYuLiang:n}=e.yuLiangRealTimeInfoVo,{name:s,code:o}=e.yuLiangBaseInfoVo;t.name=null==s?"—":s,t.collectTime=null==l?"—":l,t.shiDuan=null==i?"—":i,t.shiDuanYuLiang=null==n?"—":n,t.index=a+1,this.tableData.push(t),this.stationInfo.push({code:o,name:s})}))):this.$message.error(e.message)})).catch((e=>{this.$message.error(e)}));else{const e={code:this.searchData};(0,n.XG)(e).then((e=>{if(200==e.code){if(e.result.yuLiangBaseInfoVo){this.tableData=[],this.stationInfo=[];let{name:a,code:t}=e.result.yuLiangBaseInfoVo;this.stationInfo.push({code:t,name:a});let l={},{collectTime:i,shiDuan:n,shiDuanYuLiang:s}=e.result.yuLiangRealTimeInfoVo;l.collectTime=null==i?"—":i,l.shiDuan=null==n?"—":n,l.shiDuanYuLiang=null==s?"—":s,l.name=null==a?"—":a,l.index=1,this.tableData.push(l)}}else this.$message.error(e.message)})).catch((e=>{this.$message.error(e)}))}},handleNumChange(e){console.log(e)},formatDateTime(e,a){var t=e.getFullYear(),l=e.getMonth()+1;l=l<10?"0"+l:l;var i=e.getDate();i=i<10?"0"+i:i;var n=e.getHours(),s=e.getMinutes();return s=s<10?"0"+s:s,a?t+"-"+l+"-"+i+" "+n:t+"-"+l+"-"+i+" "+n+":"+s}}},o=s,r=t(1001),c=(0,r.Z)(o,l,i,!1,null,"2059aef9",null),u=c.exports}}]);