"use strict";(self["webpackChunkonepic"]=self["webpackChunkonepic"]||[]).push([[5763],{12285:function(t,e,r){r.d(e,{rS:function(){return u}});var o=r(85115),s=r(87429),n=r(54597);const i=new s.Z(o.kU),a=new s.Z(o.JL),p=new s.Z(o.mM);new s.Z(o.pn);function u(t){return t&&((0,n.BZ)(t)||(0,n.fS)(t,a))?a:t&&((0,n.V2)(t)||(0,n.fS)(t,p))?p:i}},60269:function(t,e,r){r.d(e,{W:function(){return l}});var o=r(65677),s=r(94848),n=r(8693),i=r(92454),a=r(65380),p=r(53262),u=r(999);class l{constructor(t,e,r,o){this._parsedUrl=t,this._portalItem=e,this._apiKey=r,this.signal=o,this._rootDocument=null;const s=this._parsedUrl?.path.match(/^(.*)\/SceneServer\/layers\/([\d]*)\/?$/i);s&&(this._urlParts={root:s[1],layerId:parseInt(s[2],10)})}async fetch(){if(!this._urlParts)return null;const t=this._portalItem??await this._portalItemFromServiceItemId();if((0,n.Wi)(t))return this._loadFromUrl();const e=await this._findAndLoadRelatedPortalItem(t);return(0,n.Wi)(e)?null:this._loadFeatureLayerFromPortalItem(e)}async fetchPortalItem(){if(!this._urlParts)return null;const t=this._portalItem??await this._portalItemFromServiceItemId();return(0,n.Wi)(t)?null:this._findAndLoadRelatedPortalItem(t)}async _fetchRootDocument(){if((0,n.pC)(this._rootDocument))return this._rootDocument;if((0,n.Wi)(this._urlParts))return this._rootDocument={},{};const t={query:{f:"json",token:this._apiKey},responseType:"json",signal:this.signal},e=`${this._urlParts.root}/SceneServer`;try{const r=await(0,s["default"])(e,t);this._rootDocument=r.data}catch{this._rootDocument={}}return this._rootDocument}async _fetchServiceOwningPortalUrl(){const t=this._parsedUrl?.path,e=t?o.id?.findServerInfo(t):null;if(e?.owningSystemUrl)return e.owningSystemUrl;const r=t?t.replace(/(.*\/rest)\/.*/i,"$1")+"/info":null;try{const t=(await(0,s["default"])(r,{query:{f:"json"},responseType:"json",signal:this.signal})).data.owningSystemUrl;if(t)return t}catch(n){(0,i.r9)(n)}return null}async _findAndLoadRelatedPortalItem(t){try{return(await t.fetchRelatedItems({relationshipType:"Service2Service",direction:"reverse"},{signal:this.signal})).find((t=>"Feature Service"===t.type))||null}catch(e){return(0,i.r9)(e),null}}async _loadFeatureLayerFromPortalItem(t){await t.load({signal:this.signal});const e=await this._findMatchingAssociatedSublayerUrl(t.url??"");return new a["default"]({url:e,portalItem:t}).load({signal:this.signal})}async _loadFromUrl(){const t=await this._findMatchingAssociatedSublayerUrl(`${this._urlParts?.root}/FeatureServer`);return new a["default"]({url:t}).load({signal:this.signal})}async _findMatchingAssociatedSublayerUrl(t){const e=t.replace(/^(.*FeatureServer)(\/[\d]*\/?)?$/i,"$1"),r={query:{f:"json"},responseType:"json",authMode:"no-prompt",signal:this.signal},o=this._urlParts?.layerId,n=this._fetchRootDocument(),i=(0,s["default"])(e,r),[a,p]=await Promise.all([i,n]),u=p&&p.layers,l=a.data&&a.data.layers;if(!Array.isArray(l))throw new Error("expected layers array");if(Array.isArray(u)){for(let s=0;s<Math.min(u.length,l.length);s++)if(u[s].id===o)return`${e}/${l[s].id}`}else if(null!=o&&o<l.length)return`${e}/${l[o].id}`;throw new Error("could not find matching associated sublayer")}async _portalItemFromServiceItemId(){const t=(await this._fetchRootDocument()).serviceItemId;if(!t)return null;const e=new u["default"]({id:t,apiKey:this._apiKey}),r=await this._fetchServiceOwningPortalUrl();(0,n.pC)(r)&&(e.portal=new p.Z({url:r}));try{return e.load({signal:this.signal})}catch(o){return(0,i.r9)(o),null}}}},21965:function(t,e,r){r.d(e,{H3:function(){return _},QI:function(){return c},U4:function(){return p},Yh:function(){return y}});var o=r(61445),s=r(60931),n=r(58006),i=(r(94315),r(15055),r(56667)),a=r(77623);let p=class extends s.wq{constructor(){super(...arguments),this.nodesPerPage=null,this.rootIndex=0,this.lodSelectionMetricType=null}};(0,o._)([(0,n.Cb)({type:Number})],p.prototype,"nodesPerPage",void 0),(0,o._)([(0,n.Cb)({type:Number})],p.prototype,"rootIndex",void 0),(0,o._)([(0,n.Cb)({type:String})],p.prototype,"lodSelectionMetricType",void 0),p=(0,o._)([(0,a.j)("esri.layer.support.I3SNodePageDefinition")],p);let u=class extends s.wq{constructor(){super(...arguments),this.factor=1}};(0,o._)([(0,n.Cb)({type:Number,json:{read:{source:"textureSetDefinitionId"}}})],u.prototype,"id",void 0),(0,o._)([(0,n.Cb)({type:Number})],u.prototype,"factor",void 0),u=(0,o._)([(0,a.j)("esri.layer.support.I3SMaterialTexture")],u);let l=class extends s.wq{constructor(){super(...arguments),this.baseColorFactor=[1,1,1,1],this.baseColorTexture=null,this.metallicRoughnessTexture=null,this.metallicFactor=1,this.roughnessFactor=1}};(0,o._)([(0,n.Cb)({type:[Number]})],l.prototype,"baseColorFactor",void 0),(0,o._)([(0,n.Cb)({type:u})],l.prototype,"baseColorTexture",void 0),(0,o._)([(0,n.Cb)({type:u})],l.prototype,"metallicRoughnessTexture",void 0),(0,o._)([(0,n.Cb)({type:Number})],l.prototype,"metallicFactor",void 0),(0,o._)([(0,n.Cb)({type:Number})],l.prototype,"roughnessFactor",void 0),l=(0,o._)([(0,a.j)("esri.layer.support.I3SMaterialPBRMetallicRoughness")],l);let c=class extends s.wq{constructor(){super(...arguments),this.alphaMode="opaque",this.alphaCutoff=.25,this.doubleSided=!1,this.cullFace="none",this.normalTexture=null,this.occlusionTexture=null,this.emissiveTexture=null,this.emissiveFactor=null,this.pbrMetallicRoughness=null}};(0,o._)([(0,i.J)({opaque:"opaque",mask:"mask",blend:"blend"})],c.prototype,"alphaMode",void 0),(0,o._)([(0,n.Cb)({type:Number})],c.prototype,"alphaCutoff",void 0),(0,o._)([(0,n.Cb)({type:Boolean})],c.prototype,"doubleSided",void 0),(0,o._)([(0,i.J)({none:"none",back:"back",front:"front"})],c.prototype,"cullFace",void 0),(0,o._)([(0,n.Cb)({type:u})],c.prototype,"normalTexture",void 0),(0,o._)([(0,n.Cb)({type:u})],c.prototype,"occlusionTexture",void 0),(0,o._)([(0,n.Cb)({type:u})],c.prototype,"emissiveTexture",void 0),(0,o._)([(0,n.Cb)({type:[Number]})],c.prototype,"emissiveFactor",void 0),(0,o._)([(0,n.Cb)({type:l})],c.prototype,"pbrMetallicRoughness",void 0),c=(0,o._)([(0,a.j)("esri.layer.support.I3SMaterialDefinition")],c);let d=class extends s.wq{};(0,o._)([(0,n.Cb)({type:String,json:{read:{source:["name","index"],reader:(t,e)=>null!=t?t:`${e.index}`}}})],d.prototype,"name",void 0),(0,o._)([(0,i.J)({jpg:"jpg",png:"png",dds:"dds","ktx-etc2":"ktx-etc2",ktx2:"ktx2",basis:"basis"})],d.prototype,"format",void 0),d=(0,o._)([(0,a.j)("esri.layer.support.I3STextureFormat")],d);let y=class extends s.wq{constructor(){super(...arguments),this.atlas=!1}};(0,o._)([(0,n.Cb)({type:[d]})],y.prototype,"formats",void 0),(0,o._)([(0,n.Cb)({type:Boolean})],y.prototype,"atlas",void 0),y=(0,o._)([(0,a.j)("esri.layer.support.I3STextureSetDefinition")],y);let h=class extends s.wq{};(0,o._)([(0,i.J)({Float32:"Float32",UInt64:"UInt64",UInt32:"UInt32",UInt16:"UInt16",UInt8:"UInt8"})],h.prototype,"type",void 0),(0,o._)([(0,n.Cb)({type:Number})],h.prototype,"component",void 0),h=(0,o._)([(0,a.j)("esri.layer.support.I3SGeometryAttribute")],h);let f=class extends s.wq{};(0,o._)([(0,i.J)({draco:"draco"})],f.prototype,"encoding",void 0),(0,o._)([(0,n.Cb)({type:[String]})],f.prototype,"attributes",void 0),f=(0,o._)([(0,a.j)("esri.layer.support.I3SGeometryCompressedAttributes")],f);let m=class extends s.wq{constructor(){super(...arguments),this.offset=0}};(0,o._)([(0,n.Cb)({type:Number})],m.prototype,"offset",void 0),(0,o._)([(0,n.Cb)({type:h})],m.prototype,"position",void 0),(0,o._)([(0,n.Cb)({type:h})],m.prototype,"normal",void 0),(0,o._)([(0,n.Cb)({type:h})],m.prototype,"uv0",void 0),(0,o._)([(0,n.Cb)({type:h})],m.prototype,"color",void 0),(0,o._)([(0,n.Cb)({type:h})],m.prototype,"uvRegion",void 0),(0,o._)([(0,n.Cb)({type:h})],m.prototype,"featureId",void 0),(0,o._)([(0,n.Cb)({type:h})],m.prototype,"faceRange",void 0),(0,o._)([(0,n.Cb)({type:f})],m.prototype,"compressedAttributes",void 0),m=(0,o._)([(0,a.j)("esri.layer.support.I3SGeometryBuffer")],m);let _=class extends s.wq{};(0,o._)([(0,i.J)({triangle:"triangle"})],_.prototype,"topology",void 0),(0,o._)([(0,n.Cb)()],_.prototype,"geometryBuffers",void 0),_=(0,o._)([(0,a.j)("esri.layer.support.I3SGeometryDefinition")],_)},85877:function(t,e,r){r.d(e,{C:function(){return o}});const o={analytics:{supportsCacheHint:!1},attachment:{supportsContentType:!1,supportsExifInfo:!1,supportsKeywords:!1,supportsName:!1,supportsSize:!1,supportsCacheHint:!1,supportsResize:!1},data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:!1},editing:{supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsGeometryUpdate:!1,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:!1,supportsDelete:!1,supportsEditing:!1,supportsChangeTracking:!1,supportsQuery:!1,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:!1,supportsExceedsLimitStatistics:!1},queryRelated:{supportsCount:!1,supportsOrderBy:!1,supportsPagination:!1,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},query:{maxRecordCount:0,maxRecordCountFactor:0,standardMaxRecordCount:0,supportsCacheHint:!1,supportsCentroid:!1,supportsCompactGeometry:!1,supportsDefaultSpatialReference:!1,supportsFullTextSearch:!1,supportsDisjointSpatialRelationship:!1,supportsDistance:!1,supportsDistinct:!1,supportsExtent:!1,supportsFormatPBF:!1,supportsGeometryProperties:!1,supportsHavingClause:!1,supportsHistoricMoment:!1,supportsMaxRecordCountFactor:!1,supportsOrderBy:!1,supportsPagination:!1,supportsPercentileStatistics:!1,supportsQuantization:!1,supportsQuantizationEditMode:!1,supportsQueryByOthers:!1,supportsQueryGeometry:!1,supportsResultType:!1,supportsSqlExpression:!1,supportsStandardizedQueriesOnly:!1,supportsTopFeaturesQuery:!1,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsStatistics:!1,tileMaxRecordCount:0}}},39413:function(t,e,r){r.d(e,{xe:function(){return g}});r(57658);var o=r(94848),s=(r(15055),r(22130),r(81653),r(8693),r(92454)),n=r(928),i=(r(18037),r(26114)),a=(r(51802),r(94370)),p=(r(44420),r(51654)),u=(r(65554),r(74674)),l=(r(85115),r(59053),r(87429),r(12285),r(74440)),c=(r(54597),r(13384),r(55163));r(36945);var d,y=r(85381);function h(t){return{...f,...t,type:"solid"}}!function(t){t[t.INVISIBLE=0]="INVISIBLE",t[t.TRANSPARENT=1]="TRANSPARENT",t[t.OPAQUE=2]="OPAQUE"}(d||(d={}));const f={color:(0,y.f)(0,0,0,.2),size:1,extensionLength:0,opacity:1,objectTransparency:d.OPAQUE,hasSlicePlane:!1};(0,y.f)(0,0,0,.2),d.OPAQUE;r(7738),r(23767),r(8585),r(68696);var m=r(45263),_=r(64680);r(97848),r(37740),r(59018),r(53838);(0,m.a)(),(0,u.c)(),(0,u.c)(),(0,y.c)(),(0,i.c)();function I(t=[0,0,0],e=[-1,-1,-1],r=(0,m.a)()){return{center:(0,u.a)(t),halfSize:(0,_.b)(e),quaternion:(0,p.b)(r)}}(()=>{const t=new Int8Array(162);let e=0;const r=r=>{for(let o=0;o<r.length;o++)t[e+o]=r[o];e+=6};r([6,2,3,1,5,4]),r([0,2,3,1,5,4]),r([0,2,3,7,5,4]),r([0,1,3,2,6,4]),r([0,1,3,2,0,0]),r([0,1,5,7,3,2]),r([0,1,3,7,6,4]),r([0,1,3,7,6,2]),r([0,1,5,7,6,2]),r([0,1,5,4,6,2]),r([0,1,5,4,0,0]),r([0,1,3,7,5,4]),r([0,2,6,4,0,0]),r([0,0,0,0,0,0]),r([1,3,7,5,0,0]),r([2,3,7,6,4,0]),r([2,3,7,6,0,0]),r([2,3,1,5,7,6]),r([0,1,5,7,6,2]),r([0,1,5,7,6,4]),r([0,1,3,7,6,4]),r([4,5,7,6,2,0]),r([4,5,7,6,0,0]),r([4,5,1,3,7,6]),r([0,2,3,7,5,4]),r([6,2,3,7,5,4]),r([6,2,3,1,5,4])})();(0,u.c)(),(0,u.c)(),(0,u.c)(),(0,m.a)();var S=r(66758);(0,l.Ue)();var b;function g(t,e,r,n,i){const a=[];for(const o of e)if(o&&i.includes(o.name)){const e=`${t}/nodes/${r}/attributes/${o.key}/0`;a.push({url:e,storageInfo:o})}return(0,s.as)(a.map((t=>(0,o["default"])(t.url,{responseType:"array-buffer"}).then((e=>(0,c.qM)(t.storageInfo,e.data)))))).then((t=>{const e=[];for(const r of n){const o={};for(let e=0;e<t.length;e++){const s=t[e].value;null!=s&&(o[a[e].storageInfo.name]=T(s,r))}e.push(o)}return e}))}!function(t){t[t.OUTSIDE=0]="OUTSIDE",t[t.INTERSECTS_CENTER_OUTSIDE=1]="INTERSECTS_CENTER_OUTSIDE",t[t.INTERSECTS_CENTER_INSIDE=2]="INTERSECTS_CENTER_INSIDE",t[t.INSIDE=3]="INSIDE"}(b||(b={}));const v=-32768,C=-(2**31);function T(t,e){if(!t)return null;const r=t[e];return(0,n.z3)(t)?r===v?null:r:(0,n.Hx)(t)?r===C?null:r:r!=r?null:r}h({color:[0,0,0,0],opacity:0});const x=new Array(24);new S.a(x,3,!0),(0,u.c)(),(0,u.c)(),(0,i.c)();(0,a.c)(),(0,p.c)(),(0,l.Ue)(),(0,l.Ue)(),I(),(0,u.c)(),new Array(72),(0,a.c)()},7738:function(t,e,r){r.d(e,{a9:function(){return o}});var o;r(67752),r(8693);!function(t){t[t.Multiply=1]="Multiply",t[t.Ignore=2]="Ignore",t[t.Replace=3]="Replace",t[t.Tint=4]="Tint"}(o||(o={}))},66758:function(t,e,r){r.d(e,{a:function(){return o}});class o{constructor(t,e,r=!1,o=e){this.data=t,this.size=e,this.exclusive=r,this.stride=o}}},23319:function(t,e,r){r.d(e,{V:function(){return i},e:function(){return n}});r(57658);var o=r(8693),s=r(71062);async function n(t,e=t.popupTemplate){if((0,o.Wi)(e))return[];const r=await e.getRequiredFields(t.fieldsIndex),{lastEditInfoEnabled:n}=e,{objectIdField:i,typeIdField:a,globalIdField:p,relationships:u}=t;if(r.includes("*"))return["*"];const l=n?await(0,s.CH)(t):[],c=(0,s.Q0)(t.fieldsIndex,[...r,...l]);return a&&c.push(a),c&&i&&t.fieldsIndex?.has(i)&&!c.includes(i)&&c.push(i),c&&p&&t.fieldsIndex?.has(p)&&!c.includes(p)&&c.push(p),u&&u.forEach((e=>{const{keyField:r}=e;c&&r&&t.fieldsIndex?.has(r)&&!c.includes(r)&&c.push(r)})),c}function i(t,e){return t.popupTemplate?t.popupTemplate:(0,o.pC)(e)&&e.defaultPopupTemplateEnabled&&(0,o.pC)(t.defaultPopupTemplate)?t.defaultPopupTemplate:null}}}]);