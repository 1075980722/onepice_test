"use strict";(self["webpackChunkonepic"]=self["webpackChunkonepic"]||[]).push([[8914],{28914:function(t,a,e){e.r(a),e.d(a,{default:function(){return d}});var i=function(){var t=this,a=t._self._c;return a("div",{staticClass:"popupchart"},[a("div",{staticClass:"top"},[a("span",[t._v("时间")]),a("el-select",{attrs:{placeholder:"请选择"},on:{change:t.handleChangeData},model:{value:t.time,callback:function(a){t.time=a},expression:"time"}},t._l(t.options,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),a("div",{staticClass:"center"},[a("div",{ref:"shuizhi",staticStyle:{width:"100%",height:"100%"}})]),a("div",{staticClass:"footer"},[a("p",[t._v("备注:"+t._s(t.remark))])])])},s=[],h=(e(57658),e(11117)),n=e(51206),l={props:{chartData:{type:Object},query:{type:Object}},watch:{chartData:{handler(t){this.$nextTick((()=>{this.chartData=t,""!=this.mychart&&(this.mychart.clear(this.option),this.initChart())}))},deep:!0,immediate:!0}},data(){return{mychart:"",option:{},remark:"",options:[{value:"6",label:"6小时"},{value:"12",label:"12小时"},{value:"24",label:"一天"},{value:"48",label:"二天"},{value:"72",label:"三天"}],time:"24",chartDatatemp:[],code:this.query.code,source:this.query.source}},created(){},mounted(){this.initChart()},methods:{initChart(){this.mychart=h.S1(this.$refs.shuizhi);let t={tooltip:{trigger:"axis"},legend:{data:["氨氮","总磷","高猛酸钾指数","溶解氧","化学需氧量"]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:this.chartData.xData},yAxis:{name:"单位(mg/L)",nameTextStyle:{fontSize:14,color:"#999"},type:"value",axisTick:{show:!1},axisLine:{show:!0,lineStyle:{color:"#DCE2E8"}},axisLabel:{textStyle:{color:"#556677"}}},series:[{name:"氨氮",type:"line",data:this.chartData.yData1,smooth:!0},{name:"总磷",type:"line",data:this.chartData.yData2,smooth:!0},{name:"高猛酸钾指数",type:"line",data:this.chartData.yData3,smooth:!0},{name:"溶解氧",type:"line",data:this.chartData.yData4,smooth:!0},{name:"化学需氧量",type:"line",data:this.chartData.yData5,smooth:!0}]};this.mychart.setOption(t),this.$nextTick((()=>{window.addEventListener("resize",(function(){this.mychart.resize()}))}))},handleChangeData(t){this.handleData(t)},async handleData(t){const a=this.formatDateTime(new Date(new Date((new Date).getTime()-60*t*60*1e3))),e=this.formatDateTime(new Date((new Date).getTime()));let i={startTime:a,endTime:e,code:this.code,source:this.source},s=await(0,n.H)(i),h=s.result[0];this.columndata=[],this.$store.state.point.tableData=[],this.chartData={xData:[],yData1:[],yData2:[],yData3:[],yData4:[],yData5:[]},h.shuiZhiHistoryInfoVos.forEach(((t,a)=>{let e={};e.id=a+1,e.collectTime=null==t.spt?"-":t.spt,e.nh3n=null==t.nh3n?"-":t.nh3n,e.tp=null==t.tp?"-":t.tp,e.codmn=null==t.codmn?"-":t.codmn,e.dox=null==t.dox?"-":t.dox,e.codcr=null==t.codcr?"-":t.codcr,this.chartData.xData.push(t.spt),this.chartData.yData1.push(t.nh3n),this.chartData.yData2.push(t.tp),this.chartData.yData3.push(t.codmn),this.chartData.yData4.push(t.dox),this.chartData.yData5.push(t.codcr),this.$store.dispatch("updateTableData",e)}))}}},o=l,c=e(1001),r=(0,c.Z)(o,i,s,!1,null,"416b63bc",null),d=r.exports}}]);