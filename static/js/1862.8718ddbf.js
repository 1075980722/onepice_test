"use strict";(self["webpackChunkonepic"]=self["webpackChunkonepic"]||[]).push([[1862],{31862:function(t,i,a){a.r(i),a.d(i,{default:function(){return c}});var e=function(){var t=this,i=t._self._c;return i("div",{staticClass:"shuiqing"},[i("div",{staticClass:"title"},[t._v("水情监测")]),i("div",{staticClass:"conditionfilter"},[i("div",{staticClass:"datafrom"},[i("span",[t._v("数据来源:")]),i("el-checkbox-group",{model:{value:t.datafrom,callback:function(i){t.datafrom=i},expression:"datafrom"}},[i("el-checkbox",{attrs:{label:"3",value:"3"}},[t._v("水文")]),i("el-checkbox",{attrs:{label:"1",value:"1"}},[t._v("自建")])],1)],1),i("div",{staticClass:"filter"},[i("el-select",{attrs:{size:"small","popper-append-to-body":!1,"no-data-text":"数据为空显示此处信息",filterable:"",placeholder:"请选择类型"},on:{change:t.handleChooseType},model:{value:t.filter.type,callback:function(i){t.$set(t.filter,"type",i)},expression:"filter.type"}},[i("el-option",{attrs:{label:"管理所",value:"1"}}),i("el-option",{attrs:{label:"流域水系",value:"2"}})],1),i("el-select",{staticStyle:{margin:"0 10px"},attrs:{size:"small","popper-append-to-body":!1,"no-data-text":"数据为空显示此处信息",filterable:"",placeholder:"请选择"},model:{value:t.filter.drop,callback:function(i){t.$set(t.filter,"drop",i)},expression:"filter.drop"}},t._l(t.dropData,(function(t,a){return i("el-option",{key:a,attrs:{label:t.label,value:t.value}})})),1)],1),i("div",{staticClass:"floodLevel"},[i("span",[t._v("站类选择:")]),i("el-radio-group",{on:{change:t.sitechooseChange},model:{value:t.sitechoose,callback:function(i){t.sitechoose=i},expression:"sitechoose"}},[i("el-radio",{attrs:{label:"60",value:"60"}},[t._v("水闸")]),i("el-radio",{attrs:{label:"70",value:"70"}},[t._v("泵站")]),i("el-radio",{attrs:{label:"80",value:"80"}},[t._v("河道")])],1)],1),i("div",{staticClass:"floodLevel"},[i("span",[t._v("重要程度:")]),i("el-radio",{attrs:{label:"0"},model:{value:t.important,callback:function(i){t.important=i},expression:"important"}},[t._v("全部")]),i("el-radio",{attrs:{label:"1"},model:{value:t.important,callback:function(i){t.important=i},expression:"important"}},[t._v("重点")])],1),i("div",{staticClass:"floodLevel"},[i("span",[t._v("是否绑定雨情:")]),i("el-radio-group",{attrs:{disabled:"60"===t.sitechoose||"70"===t.sitechoose},on:{change:t.bindrainChange},model:{value:t.bindrain,callback:function(i){t.bindrain=i},expression:"bindrain"}},[i("el-radio",{attrs:{label:"1"}},[t._v("是")]),i("el-radio",{attrs:{label:"0"}},[t._v("否")])],1)],1),i("div",{staticClass:"search"},[i("el-input",{attrs:{size:"small",placeholder:"站名、站码"},model:{value:t.filter.stationInput,callback:function(i){t.$set(t.filter,"stationInput",i)},expression:"filter.stationInput"}}),i("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-search"},on:{click:t.handleSearch}},[t._v(" 查询 ")])],1)]),i("div",{staticClass:"content"},["60"==t.switchTable?i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{data:t.tablelist.datalist0,"header-cell-style":{padding:0,height:"8vw",background:"#eeeeee",color:"#000"},border:"",stripe:"",height:"97%"}},[i("el-table-column",{attrs:{prop:"id",width:"60",label:"序号",align:"center"}}),i("el-table-column",{attrs:{prop:"name",label:"站名",align:"center"}}),i("el-table-column",{attrs:{prop:"tm",label:"时间",align:"center"}}),i("el-table-column",{attrs:{prop:"shangShuiWei",label:"上游水位(m)",align:"center"}}),i("el-table-column",{attrs:{prop:"xiaShuiWei",label:"下游水位(m)",align:"center"}}),i("el-table-column",{attrs:{prop:"liuliang",label:"流量(m3/s)",align:"center"}})],1):"70"==t.switchTable?i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{data:t.tablelist.datalist1,"header-cell-style":{padding:0,height:"8vw",background:"#eeeeee",color:"#000"},border:"",stripe:"",height:"97%"}},[i("el-table-column",{attrs:{prop:"id",label:"序号",width:"60",align:"center"}}),i("el-table-column",{attrs:{prop:"name",label:"站名",align:"center"}}),i("el-table-column",{attrs:{prop:"tm",label:"时间",align:"center"}}),i("el-table-column",{attrs:{prop:"shangShuiWei",label:"内河水位(m)",align:"center"}}),i("el-table-column",{attrs:{prop:"xiaShuiWei",label:"外河水位(m)",align:"center"}}),i("el-table-column",{attrs:{prop:"liuliang",label:"流量(m3/s)",align:"center"}})],1):"80"==t.switchTable?i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{data:t.tablelist.datalist2,"header-cell-style":{padding:0,height:"8vw",background:"#eeeeee",color:"#000"},border:"",stripe:"",height:"97%"}},[i("el-table-column",{attrs:{prop:"id",label:"序号",width:"80",align:"center"}}),i("el-table-column",{attrs:{prop:"name",width:"220",label:"站名",align:"center"}}),i("el-table-column",{attrs:{prop:"tm",label:"时间",align:"center"}}),i("el-table-column",{attrs:{prop:"shuiwei",label:"水位(m)",align:"center"}}),i("el-table-column",{attrs:{prop:"liuliang",label:"流量(m3/s)",align:"center"}})],1):t._e()],1)])},l=[],s=(a(57658),a(16391));const n=t=>(0,s.Z)({url:"/mainBizShuiQing/open/getList",method:"GET",params:t}),o=t=>(0,s.Z)({url:"/mainBizShuiQing/open/getRealTimeDataAllShuiWeiV2",method:"GET",params:t});var h={data(){return{loading:!1,datafrom:["1","3"],sitechoose:"80",important:"0",bindrain:"1",startTime:"",endTime:"",filter:{type:"1",drop:"0",stationInput:""},dropData:[],count:{num0:0},groupdata:{numRange0:!1},tablelist:{datalist0:[],datalist1:[],datalist2:[]},deviceData:[],deviceDataBind:[],switchTable:"80"}},created(){},mounted(){this.handleSearch(),this.handleChooseType(1)},methods:{async handleChooseType(t){let i=await n({type:t}),a=i.result;1==t?(this.dropData=[],a.forEach((t=>{let i={};i.label=t.shuiQingOfficeVo.name,i.value=t.shuiQingOfficeVo.id,this.dropData.push(i)}))):(this.dropData=[],a.forEach((t=>{let i={};i.label=t.shuiQingWrpShuiXiVo.name,i.value=t.shuiQingWrpShuiXiVo.id,this.dropData.push(i)}))),this.filter.drop="0"},async handleSearch(){if(this.loading=!0,"80"===this.sitechoose){let t={stationName:this.filter.stationInput,sources:this.datafrom.toString(),stationTypes:this.sitechoose.toString(),mainSelect:this.important,zoneType:this.filter.type,zoneCode:this.filter.drop,bindingYuLiangView:this.bindrain},i=await o(t);200===i.code&&(this.loading=!1);let a=i.result;this.deviceData=[],this.deviceDataBind=[],null!=a.shuiQingRealInfoVoList?(this.switchTable="80",this.tablelist.datalist0=[],this.tablelist.datalist1=[],this.tablelist.datalist2=[],a.shuiQingRealInfoVoList.forEach(((t,i)=>{if(null!=t.shuiQingDataVo){if("1"===t.shuiQingBaseInfoVo.isBangDingYuLiang){let i=Object.assign(t.shuiQingDataVo,t.shuiQingBaseInfoVo);this.deviceDataBind.push([i])}if("0"===t.shuiQingBaseInfoVo.isBangDingYuLiang){let i=Object.assign(t.shuiQingDataVo,t.shuiQingBaseInfoVo);console.log(i),this.deviceData.push([i])}let a={};a.id=i+1,a.longitude=t.shuiQingBaseInfoVo.longitude,a.latitude=t.shuiQingBaseInfoVo.latitude,a.name=null==t.shuiQingBaseInfoVo.name?"-":t.shuiQingBaseInfoVo.name;let e=null==t.shuiQingDataVo.collectTime?"-":t.shuiQingDataVo.collectTime.slice(5,-3);a.tm=e,a.shuiwei=null==t.shuiQingDataVo.shuiWei?"-":t.shuiQingDataVo.shuiWei,a.liuliang=null==t.shuiQingDataVo.zhaGuoLiuLiang?"-":t.shuiQingDataVo.zhaGuoLiuLiang,this.tablelist.datalist2.push(a)}}))):(this.loading=!1,this.$message.error("暂无数据"),this.tablelist.datalist0=[],this.tablelist.datalist1=[],this.tablelist.datalist2=[]);let e=this.flatten5(this.deviceData),l=this.flatten5(this.deviceDataBind);0!=e&&await this.initWaterinfoData(e),0!=l&&await this.initWaterinfoBindData(l)}else if("70"===this.sitechoose){let t={stationName:this.filter.stationInput,sources:this.datafrom.toString(),stationTypes:this.sitechoose.toString(),mainSelect:this.important,zoneType:this.filter.type,zoneCode:this.filter.drop,bindingYuLiangView:"0"},i=await o(t);200===i.code&&(this.loading=!1);let a=i.result;this.deviceData=[],null!=a.shuiQingRealInfoVoList?(this.switchTable="70",this.tablelist.datalist0=[],this.tablelist.datalist1=[],this.tablelist.datalist2=[],a.shuiQingRealInfoVoList.forEach(((t,i)=>{if(null!=t.shuiQingDataVo){let a=Object.assign(t.shuiQingDataVo,t.shuiQingBaseInfoVo);this.deviceData.push([a]);let e={};e.id=i+1,e.longitude=t.shuiQingBaseInfoVo.longitude,e.latitude=t.shuiQingBaseInfoVo.latitude,e.name=null==t.shuiQingBaseInfoVo.name?"-":t.shuiQingBaseInfoVo.name;let l=null==t.shuiQingDataVo.collectTime?"-":t.shuiQingDataVo.collectTime.slice(5,-3);e.tm=l,e.shangShuiWei=null==t.shuiQingDataVo.shangShuiWei?"-":t.shuiQingDataVo.shangShuiWei,e.xiaShuiWei=null==t.shuiQingDataVo.xiaShuiWei?"-":t.shuiQingDataVo.xiaShuiWei,e.liuliang=null==t.shuiQingDataVo.zhaGuoLiuLiang?"-":t.shuiQingDataVo.zhaGuoLiuLiang,this.tablelist.datalist1.push(e)}}))):(this.loading=!1,this.$message.error("暂无数据"),this.tablelist.datalist0=[],this.tablelist.datalist1=[],this.tablelist.datalist2=[]);let e=this.flatten5(this.deviceData);await this.initWaterinfoGPData(e)}else if("60"===this.sitechoose){let t={stationName:this.filter.stationInput,sources:this.datafrom.toString(),stationTypes:this.sitechoose.toString(),mainSelect:this.important,zoneType:this.filter.type,zoneCode:this.filter.drop,bindingYuLiangView:"0"},i=await o(t);200===i.code&&(this.loading=!1);let a=i.result;this.deviceData=[],null!=a.shuiQingRealInfoVoList?(this.switchTable="60",this.tablelist.datalist0=[],this.tablelist.datalist1=[],this.tablelist.datalist2=[],a.shuiQingRealInfoVoList.forEach(((t,i)=>{if(null!=t.shuiQingDataVo){let a=Object.assign(t.shuiQingDataVo,t.shuiQingBaseInfoVo);this.deviceData.push([a]);let e={};e.id=i+1,e.longitude=t.shuiQingBaseInfoVo.longitude,e.latitude=t.shuiQingBaseInfoVo.latitude,e.name=null==t.shuiQingBaseInfoVo.name?"-":t.shuiQingBaseInfoVo.name;let l=null==t.shuiQingDataVo.collectTime?"-":t.shuiQingDataVo.collectTime.slice(5,-3);e.tm=l,e.shangShuiWei=null==t.shuiQingDataVo.shangShuiWei?"-":t.shuiQingDataVo.shangShuiWei,e.xiaShuiWei=null==t.shuiQingDataVo.xiaShuiWei?"-":t.shuiQingDataVo.xiaShuiWei,e.liuliang=null==t.shuiQingDataVo.zhaGuoLiuLiang?"-":t.shuiQingDataVo.zhaGuoLiuLiang,this.tablelist.datalist0.push(e)}}))):(this.loading=!1,this.$message.error("暂无数据"),this.tablelist.datalist0=[],this.tablelist.datalist1=[],this.tablelist.datalist2=[])}}}},r=h,u=a(1001),d=(0,u.Z)(r,e,l,!1,null,"27b5bf43",null),c=d.exports}}]);