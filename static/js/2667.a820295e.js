"use strict";(self["webpackChunkonepic"]=self["webpackChunkonepic"]||[]).push([[2667],{12667:function(a,e,t){t.r(e),t.d(e,{default:function(){return m}});var i=function(){var a=this,e=a._self._c;return e("div",{staticClass:"contain"},[e("div",{staticClass:"left"},[e("el-input",{attrs:{placeholder:"输入关键字进行过滤"},model:{value:a.filterText,callback:function(e){a.filterText=e},expression:"filterText"}}),e("el-tree",{ref:"tree",staticClass:"filter-tree",attrs:{data:a.TreeData,props:a.defaultProps,"check-on-click-node":!0,"filter-node-method":a.filterNode,"node-key":"id","default-expanded-keys":["97b1c082-f80e-45fc-8f1f-40e7d949e10e"],"highlight-current":""},on:{"node-click":a.handleNodeClick}})],1),e("div",{staticClass:"right"},[e("header",[a._v(a._s(a.pumpName)+"  "+a._s(a.pumptime))]),e("div",{staticClass:"table"},a._l(a.tableDataPump,(function(t,i){return e("div",{key:i,staticClass:"tablePump"},[e("div",{staticClass:"pump"},[a._v(a._s(t.gtname))]),e("div",{staticClass:"kaidu"},[a._v(a._s(t.gtkd)+" m")])])})),0),e("div",{staticClass:"search"},[e("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:a.form}},[e("el-form-item",{attrs:{label:"闸门名称："}},[e("el-select",{attrs:{clearable:"","popper-append-to-body":!1,"no-data-text":"数据为空显示此处信息",filterable:"",placeholder:"请选择设备名称："},model:{value:a.form.gtname,callback:function(e){a.$set(a.form,"gtname",e)},expression:"form.gtname"}},a._l(a.tableDataPump,(function(a,t){return e("el-option",{key:t,attrs:{label:a.gtname,value:a.gtname}})})),1)],1),e("el-form-item",{attrs:{label:"变量名称："}},[e("el-select",{attrs:{clearable:"","popper-append-to-body":!1,multiple:"","collapse-tags":"","no-data-text":"数据为空显示此处信息",filterable:"",placeholder:"请选择变量名称："},model:{value:a.form.variable,callback:function(e){a.$set(a.form,"variable",e)},expression:"form.variable"}},a._l(a.differentData,(function(a,t){return e("el-option",{key:t,attrs:{label:a.name,value:a.value}})})),1)],1),e("el-form-item",{attrs:{label:"采集时间："}},[e("el-date-picker",{attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd hh:mm:ss"},on:{change:a.getTimeChange},model:{value:a.form.pickerTime,callback:function(e){a.$set(a.form,"pickerTime",e)},expression:"form.pickerTime"}})],1),e("el-form-item",[e("el-button",{attrs:{type:"primary"},on:{click:a.onSubmit}},[a._v("查询")])],1)],1)],1),e("div",{staticClass:"echartsPicu"},[e("pumpEchart",{attrs:{YData:a.YData,XData:a.XData,echartsTitle:a.echartsTitle}})],1),e("div",{staticClass:"table-two"},[e("el-table",{staticStyle:{width:"100%"},attrs:{data:a.tableDataList,height:"250",border:"","header-cell-style":{background:"#f8f8f8",color:"#000000"}}},[e("el-table-column",{attrs:{prop:"gongChengRealTimeSluVo.prjnmcd",label:"闸站名称",width:"180",align:"center"}}),e("el-table-column",{attrs:{prop:"gongChengRealTimeSluVo.clltm",label:"采集时间",width:"180",align:"center"}}),e("el-table-column",{attrs:{prop:"gongChengRealTimeSluVo.gtname",label:"闸门名称",width:"180",align:"center"}}),e("el-table-column",{attrs:{prop:"gongChengRealTimeSluVo.gtkd",label:"闸门开度（m）",align:"center"}}),e("el-table-column",{attrs:{prop:"gongChengRealTimeSluVo.ua",label:"相电压Ua（V）",align:"center"}}),e("el-table-column",{attrs:{prop:"gongChengRealTimeSluVo.ub",label:"相电压Ub（V）",align:"center"}}),e("el-table-column",{attrs:{prop:"gongChengRealTimeSluVo.uc",label:"相电压Uc（V）",align:"center"}}),e("el-table-column",{attrs:{prop:"gongChengRealTimeSluVo.ia",label:"电流Ia(A)",align:"center"}}),e("el-table-column",{attrs:{prop:"gongChengRealTimeSluVo.ib",label:"电流Ib(A)",align:"center"}}),e("el-table-column",{attrs:{prop:"gongChengRealTimeSluVo.ic",label:"电流Ic(A)",align:"center"}}),e("el-table-column",{attrs:{prop:"gongChengRealTimeSluVo.bak1",label:"线电压Uab(V)",align:"center"}}),e("el-table-column",{attrs:{prop:"gongChengRealTimeSluVo.bak2",label:"线电压Ubc(V)",align:"center"}}),e("el-table-column",{attrs:{prop:"gongChengRealTimeSluVo.bak3",label:"线电压Uca(V)",align:"center"}}),e("el-table-column",{attrs:{prop:"gongChengRealTimeSluVo.activepower",label:"总有功功率(kW)",align:"center"}}),e("el-table-column",{attrs:{prop:"gongChengRealTimeSluVo.reactivepower",label:"总无功功率(kVar)",align:"center"}}),e("el-table-column",{attrs:{prop:"gongChengRealTimeSluVo.f",label:"频率(Hz)",align:"center"}}),e("el-table-column",{attrs:{prop:"gongChengRealTimeSluVo.pf",label:"功率因数",align:"center"}})],1),e("el-pagination",{attrs:{background:"","current-page":a.currentPage,"page-sizes":[10,20,30,40],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:a.total},on:{"size-change":a.handleSizeChange,"current-change":a.handleCurrentChange}})],1)])])},l=[],s=(t(57658),t(87231)),r={components:{pumpEchart:()=>Promise.all([t.e(1117),t.e(4076)]).then(t.bind(t,24076))},data(){return{filterText:"",TreeData:[],currentPage:1,form:{gtname:"",variable:["gtkd"],pickerTime:[]},defaultProps:{children:"children",label:"label"},total:0,pumpName:"",differentData:[{name:"闸门开度（m）",value:"gtkd"},{name:"相电压Ua（V）",value:"ua"},{name:"相电压Ub（V）",value:"ub"},{name:"相电压Uc（V）",value:"uc"},{name:"电流Ia(A)",value:"ia"},{name:"电流Ib(A)",value:"ib"},{name:"电流Ic(A)",value:"ic"},{name:"线电压Uab(V)",value:"bak1"},{name:"线电压Ubc(V)",value:"bak2"},{name:"线电压Uca(V)",value:"bak3"},{name:"总有功功率(kW)",value:"activepower"},{name:"总无功功率(kVar)",value:"reactivepower"},{name:"频率(Hz)",value:"f"},{name:"功率因数",value:"pf"}],selectId:"",tableDataPump:[],tableDataList:[],pumptime:"",YData:[],XData:[],gtkdData:[],uaData:[],ubData:[],ucData:[],iaData:[],ibData:[],icData:[],bak1Data:[],bak2Data:[],bak3Data:[],activepowerData:[],reactivepowerData:[],fData:[],pfData:[],echartsTitle:[],pageSize:10,pageNo:1}},watch:{filterText(a){this.$refs.tree.filter(a)}},created(){this.getShuiZhaTreeData();var a=new Date,e=a.getFullYear(),t=a.getMonth()+1,i=a.getDate();this.form.pickerTime[0]=e+"-"+this.getfilter(t)+"-"+this.getfilter(i)+" 00:00:00",this.form.pickerTime[1]=e+"-"+this.getfilter(t)+"-"+this.getfilter(i)+" 23:59:59"},methods:{getParamsList(){const a={id:this.selectId,pageSize:this.pageSize,pageNo:this.pageNo};a.startTime=this.form.pickerTime[0],a.endTime=this.form.pickerTime[1],(0,s.fi)(a).then((a=>{200==a.code?a.result.records&&a.result.records.length&&(this.tableDataList=a.result.records,this.total=a.result.total):this.$message.error(a.message)})).catch((a=>{this.$message.error(a)}))},getTimeChange(a){this.form.pickerTime=a},filterNode(a,e){return!a||-1!==e.label.indexOf(a)},getShuiZhaTreeData(){(0,s.cY)().then((a=>{if(200==a.code){if(a.result&&a.result.length){let e=a.result;e.forEach((a=>{let e={};e.id=a.sluTreeVo.id,e.label=a.sluTreeVo.name,a.sluTreeVo.children&&null!=a.sluTreeVo.children&&(e.children=[],a.sluTreeVo.children.forEach((a=>{let t={};t.id=a.id,t.label=a.name,a.children&&null!=a.children&&(t.children=[],a.children.forEach((a=>{let e={};e.id=a.id,e.label=a.name,t.children.push(e)}))),e.children.push(t)}))),this.TreeData.push(e)})),this.pumpName=this.TreeData[0].children[0].children[0].label,this.selectId=this.TreeData[0].children[0].children[0].id,this.getPump(this.TreeData[0].children[0].children[0].id)}}else this.$message.error(a.message)})).catch((a=>{this.$message.error(a)}))},handleNodeClick(a){a.children||(this.pumpName=a.label,this.getPump(a.id),this.selectId=a.id)},getPump(a){const e={id:a,leaf:1};(0,s.mt)(e).then((e=>{200==e.code?e.result&&e.result.length?(this.tableDataPump=[],this.pumptime=e.result[0].gongChengRealTimeSluVo.clltm,e.result.forEach((a=>{this.tableDataPump.push({gtname:a.gongChengRealTimeSluVo.gtname,gtkd:a.gongChengRealTimeSluVo.gtkd})})),this.form.gtname=this.tableDataPump[0].gtname,this.form.variable=["gtkd"],this.getParamsList(),this.getDifferentPump(a,this.tableDataPump[0].gtname)):(this.tableDataPump=[],this.form.gtname="",this.form.variable=[],this.YData=[],this.XData=[],this.echartsTitle=[],this.tableDataList=[]):this.$message.error(e.message)})).catch((a=>{this.$message.error(a)}))},getfilter(a){return a<10?"0"+a:a},getDifferentPump(a,e){const t={id:a,gtname:e,leaf:1};""!=this.form.gtname&&(t.gtname=this.form.gtname),this.form.pickerTime&&""!=this.form.pickerTime&&null!=this.form.pickerTime?(this.form.startTime=this.form.pickerTime[0],this.form.endTime=this.form.pickerTime[1],t.startTime=this.form.startTime,t.endTime=this.form.endTime):(this.form.startTime="",this.form.endTime=""),this.echartsTitle=[],this.form.variable&&this.form.variable.length&&(this.form.variable.length>1?(this.differentData.forEach((a=>{this.form.variable.forEach((e=>{a.value==e&&this.echartsTitle.push(a.name)}))})),this.form.variable=this.form.variable.join(","),t.variable=this.form.variable):(this.differentData.forEach((a=>{a.value==this.form.variable[0]&&this.echartsTitle.push(a.name)})),t.variable=this.form.variable[0]),console.log(this.echartsTitle)),(0,s.W0)(t).then((a=>{200==a.code?a.result&&a.result.length&&(this.XData=[],this.YData=[],this.YData=[{name:"",type:"line",stack:"Total",data:[]}],a.result.forEach((a=>{this.XData.push(a.gongChengRealTimeSluVo.clltm),this.differentData.length&&this.differentData.forEach((e=>{"闸门开度（m）"==e.name&&(this.YData[0].name=e.name,this.YData[0].data.push(a.gongChengRealTimeSluVo.gtkd))}))})),console.log(this.XData,this.YData)):this.$message.error(a.message)})).catch((a=>{this.$message.error(a)}))},onSubmit(){const a={id:this.selectId,leaf:1};this.echartsTitle=[],this.form.variable&&this.form.variable.length?(this.form.variable.length>1?(this.differentData.forEach((a=>{this.form.variable.forEach((e=>{a.value==e&&this.echartsTitle.push(a.name)}))})),a.variable=this.form.variable.join(",")):(this.differentData.forEach((a=>{a.value==this.form.variable[0]&&this.echartsTitle.push(a.name)})),a.variable=this.form.variable[0]),console.log(this.echartsTitle)):this.echartsTitle=["闸门开度（m）","相电压Ua（V）","相电压Ub（V）","相电压Uc（V）","电流Ia(A)","电流Ib(A)","电流Ic(A)","线电压Uab(V)","线电压Ubc(V)","线电压Uca(V)","总有功功率(kW)","总无功功率(kVar)","频率(Hz)","功率因数"],""!=this.form.gtname&&(a.gtname=this.form.gtname),this.form.pickerTime&&""!=this.form.pickerTime&&null!=this.form.pickerTime?(this.form.startTime=this.form.pickerTime[0],this.form.endTime=this.form.pickerTime[1],a.startTime=this.form.startTime,a.endTime=this.form.endTime):(this.form.startTime="",this.form.endTime=""),(0,s.W0)(a).then((a=>{200==a.code?a.result&&a.result.length&&(this.XData=[],this.YData=[],this.gtkdData={name:"",type:"line",stack:"Total",data:[]},this.uaData={name:"",type:"line",stack:"Total",data:[]},this.ubData={name:"",type:"line",stack:"Total",data:[]},this.ucData={name:"",type:"line",stack:"Total",data:[]},this.iaData={name:"",type:"line",stack:"Total",data:[]},this.ibData={name:"",type:"line",stack:"Total",data:[]},this.icData={name:"",type:"line",stack:"Total",data:[]},this.bak1Data={name:"",type:"line",stack:"Total",data:[]},this.bak2Data={name:"",type:"line",stack:"Total",data:[]},this.bak3Data={name:"",type:"line",stack:"Total",data:[]},this.activepowerData={name:"",type:"line",stack:"Total",data:[]},this.reactivepowerData={name:"",type:"line",stack:"Total",data:[]},this.fData={name:"",type:"line",stack:"Total",data:[]},this.pfData={name:"",type:"line",stack:"Total",data:[]},console.log(this.echartsTitle),a.result.forEach((a=>{this.XData.push(a.gongChengRealTimeSluVo.clltm),this.echartsTitle.length&&this.echartsTitle.forEach((e=>{"闸门开度（m）"==e?(this.gtkdData.name=e,this.gtkdData.data.push(a.gongChengRealTimeSluVo.gtkd)):"相电压Ua（V）"==e?(this.uaData.name=e,this.uaData.data.push(a.gongChengRealTimeSluVo.ua)):"相电压Ub（V）"==e?(this.ubData.name=e,this.ubData.data.push(a.gongChengRealTimeSluVo.ub)):"相电压Uc（V）"==e?(this.ucData.name=e,this.ucData.data.push(a.gongChengRealTimeSluVo.uc)):"电流Ia(A)"==e?(this.iaData.name=e,this.iaData.data.push(a.gongChengRealTimeSluVo.ia)):"电流Ib(A)"==e?(this.ibData.name=e,this.ibData.data.push(a.gongChengRealTimeSluVo.ib)):"电流Ic(A)"==e?(this.icData.name=e,this.icData.data.push(a.gongChengRealTimeSluVo.ic)):"线电压Uab(V)"==e?(this.bak1Data.name=e,this.bak1Data.data.push(a.gongChengRealTimeSluVo.bak1)):"线电压Ubc(V)"==e?(this.bak2Data.name=e,this.bak2Data.data.push(a.gongChengRealTimeSluVo.bak2)):"线电压Uca(V)"==e?(this.bak3Data.name=e,this.bak3Data.data.push(a.gongChengRealTimeSluVo.bak3)):"总有功功率(kW)"==e?(this.activepowerData.name=e,this.activepowerData.data.push(a.gongChengRealTimeSluVo.activepower)):"总无功功率(kVar)"==e?(this.reactivepowerData.name=e,this.reactivepowerData.data.push(a.gongChengRealTimeSluVo.reactivepower)):"频率(Hz)"==e?(this.fData.name=e,this.fData.data.push(a.gongChengRealTimeSluVo.f)):"功率因数"==e&&(this.pfData.name=e,this.pfData.data.push(a.gongChengRealTimeSluVo.pf))}))})),this.gtkdData.data.length&&this.YData.push(this.gtkdData),this.uaData.data.length&&this.YData.push(this.uaData),this.ubData.data.length&&this.YData.push(this.ubData),this.ucData.data.length&&this.YData.push(this.ucData),this.iaData.data.length&&this.YData.push(this.iaData),this.ibData.data.length&&this.YData.push(this.ibData),this.icData.data.length&&this.YData.push(this.icData),this.bak1Data.data.length&&this.YData.push(this.bak1Data),this.bak2Data.data.length&&this.YData.push(this.bak2Data),this.bak3Data.data.length&&this.YData.push(this.bak3Data),this.activepowerData.data.length&&this.YData.push(this.activepowerData),this.reactivepowerData.data.length&&this.YData.push(this.reactivepowerData),this.fData.data.length&&this.YData.push(this.fData),this.pfData.data.length&&this.YData.push(this.pfData)):this.$message.error(a.message)})).catch((a=>{this.$message.error(a)}))},handleSizeChange(a){this.pageSize=a,this.getParamsList(),console.log(`每页 ${a} 条`)},handleCurrentChange(a){this.pageNo=a,this.getParamsList(),console.log(`当前页: ${a}`)}}},n=r,h=t(1001),o=(0,h.Z)(n,i,l,!1,null,"112ce9d3",null),m=o.exports},87231:function(a,e,t){t.d(e,{F:function(){return g},JB:function(){return n},W0:function(){return h},_N:function(){return s},cY:function(){return l},fi:function(){return m},mt:function(){return r},yS:function(){return o}});var i=t(16391);const l=a=>(0,i.Z)({url:"/mainBizGongCheng/open/getShuiZhaTreeInfo",method:"GET",params:a}),s=a=>(0,i.Z)({url:"/mainBizGongCheng/open/getBengZhanTreeInfo",method:"GET",params:a}),r=a=>(0,i.Z)({url:"/mainBizGongCheng/open/getShuiZhaRealGongQingData",method:"GET",params:a}),n=a=>(0,i.Z)({url:"/mainBizGongCheng/open/getBengZhanRealGongQingData",method:"GET",params:a}),h=a=>(0,i.Z)({url:"/mainBizGongCheng/open/getShuiZhaAllHisGongQingData",method:"GET",params:a}),o=a=>(0,i.Z)({url:"/mainBizGongCheng/open/getBengZhanAllHisGongQingData",method:"GET",params:a}),m=a=>(0,i.Z)({url:"/mainBizGongCheng/open/getShuiZhaPageHisGongQingData",method:"GET",params:a}),g=a=>(0,i.Z)({url:"/mainBizGongCheng/open/getBengZhanPageHisGongQingData",method:"GET",params:a})}}]);